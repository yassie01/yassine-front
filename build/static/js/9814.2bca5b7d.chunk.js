"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[9814],{6:(e,l,t)=>{t.d(l,{A:()=>b});var n=t(40848),a=t(4450),o=t(78510),i=t(67682),s=t(95104),d=t(53186),r=t(84626),c=t(22554),x=t(19488),m=t(60446),u=t.n(m),h=t(63516),p=t(65043),j=t(97508),v=t(42145),f=t(89849),g=t(66305),S=t(42101),C=t(70579);const b=e=>{const{onClose:l,isOpen:t,fetchData:m,setAction:b}=e,y=JSON.parse(localStorage.getItem("user")),[k,L]=(0,p.useState)(!1),z=(new Date).toISOString().split(".")[0],[F,D]=(0,p.useState)([]),I=(0,j.wA)(),w={sender:null===y||void 0===y?void 0:y._id,recipient:!0!==e.lead?null===e||void 0===e?void 0:e.contactEmail:null===e||void 0===e?void 0:e.leadEmail,subject:"",message:"",createByContact:null!==e&&void 0!==e&&e.id&&!0!==(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",createByLead:null!==e&&void 0!==e&&e.id&&!0===(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",startDate:"",type:"message",html:"",createBy:null===y||void 0===y?void 0:y._id},N=(0,h.Wx)({initialValues:w,validationSchema:f.y4,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:t}=l;G(),t()}}),{errors:T,touched:W,values:A,handleBlur:B,handleChange:H,handleSubmit:O,setFieldValue:_}=N,G=async()=>{try{L(!0),200===(await(0,g.d_)("api/email/add",A)).status&&(e.onClose(),m(1))}catch(l){console.log(l)}finally{L(!1)}};return(0,p.useEffect)((()=>{"template"===(null===A||void 0===A?void 0:A.type)&&(async()=>{L(!0);const e=await I((0,S.t)());var l;200===e.payload.status?D(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data):v.oR.error("Failed to fetch data","error"),L(!1)})()}),[null===A||void 0===A?void 0:A.type]),(0,C.jsxs)(n.aF,{onClose:l,isOpen:t,isCentered:!0,children:[(0,C.jsx)(n.mH,{}),(0,C.jsxs)(n.$m,{children:[(0,C.jsx)(n.rQ,{children:"Send Email "}),(0,C.jsx)(n.s_,{}),(0,C.jsx)(n.cw,{children:(0,C.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,C.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,C.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,C.jsx)(a.Text,{color:"red",children:"*"})]}),(0,C.jsx)(i.Input,{fontSize:"sm",onChange:H,onBlur:B,value:A.recipient,name:"recipient",disabled:!0,placeholder:"Recipient",fontWeight:"500",borderColor:T.recipient&&W.recipient?"red.300":null}),(0,C.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",T.recipient&&W.recipient&&T.recipient]})]}),(0,C.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,C.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,C.jsx)(a.Text,{color:"red",children:"*"})]}),(0,C.jsx)(i.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:H,onBlur:B,value:A.subject,name:"subject",fontWeight:"500",borderColor:T.subject&&W.subject?"red.300":null}),(0,C.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",T.subject&&W.subject&&T.subject]})]}),(0,C.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,C.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,C.jsx)(a.Text,{color:"red",children:"*"})]}),(0,C.jsx)(i.Input,{type:"datetime-local",fontSize:"sm",onChange:H,onBlur:B,min:u()(z).format("YYYY-MM-DD HH:mm"),value:A.startDate,name:"startDate",fontWeight:"500",borderColor:null!==T&&void 0!==T&&T.startDate&&null!==W&&void 0!==W&&W.startDate?"red.300":null}),(0,C.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",T.startDate&&W.startDate&&T.startDate]})]}),(0,C.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,C.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,C.jsx)(s.z6,{onChange:e=>{_("type",e)},value:A.type,children:(0,C.jsxs)(a.Stack,{direction:"row",children:[(0,C.jsx)(s.sx,{value:"message",children:"Message"}),(0,C.jsx)(s.sx,{value:"template",children:"Template"})]})})]}),(0,C.jsx)(a.GridItem,{colSpan:{base:12},children:"message"===(null===A||void 0===A?void 0:A.type)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:H,onBlur:B,value:A.message,name:"message",fontWeight:"500",borderColor:T.message&&W.message?"red.300":null}),(0,C.jsxs)(a.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",T.message&&W.message&&T.message]})]}):(0,C.jsx)(r.l6,{name:"html",onChange:H,onBlur:B,value:A.html,fontWeight:"500",placeholder:"Select Template",children:null===F||void 0===F?void 0:F.map((e=>(0,C.jsx)("option",{value:null===e||void 0===e?void 0:e.html,children:null===e||void 0===e?void 0:e.templateName},e._id)))})})]})}),(0,C.jsxs)(n.jl,{children:[(0,C.jsx)(c.Button,{size:"sm",variant:"brand",onClick:O,disabled:!!k,children:k?(0,C.jsx)(x.A,{}):"Save"}),(0,C.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{N.resetForm(),l()},children:"Close"})]})]})]})}},8966:(e,l,t)=>{t.d(l,{A:()=>x});var n=t(80045),a=t(31206),o=t(4450),i=t(3458),s=t(71997),d=t(27149),r=t(70579);const c=["used","total","count"];function x(e){const{used:l,total:t,count:x}=e,m=((0,n.A)(e,c),(0,a.dU)("secondaryGray.900","white")),u=(0,a.dU)("brand.500","white");return(0,r.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,r.jsx)(o.GridItem,{colSpan:{base:12,"2xl":5},children:(0,r.jsx)(s.A,{w:{base:"100%","2xl":"240px"},me:"36px",minH:200,height:"100%",onFileSelect:e.onFileSelect,content:(0,r.jsxs)(o.Box,{children:[(0,r.jsx)(i.In,{as:d.vpy,w:"70px",h:"70px",color:u}),(0,r.jsx)(o.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,r.jsx)(o.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload Files"})}),(0,r.jsx)(o.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:x>0&&(0,r.jsxs)(o.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",x]})})]})})}),(0,r.jsx)(o.GridItem,{colSpan:{base:12,"2xl":7},children:(0,r.jsxs)(o.Flex,{direction:"column",children:[(0,r.jsx)(o.Text,{color:m,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px","2xl":"50px"},children:"Upload Files"}),(0,r.jsx)(o.Text,{color:"gray.400",fontSize:"md",my:{base:"auto","2xl":"10px"},mx:"auto",textAlign:"start",children:"Accepted File Types (Images, PDFs, Word docs, Powerpoint, Excel, ZIP, and video files - 15MB max)"})]})})]})}},9250:(e,l,t)=>{t.d(l,{A:()=>v});var n=t(40848),a=t(4450),o=t(78510),i=t(67682),s=t(53186),d=t(22554),r=t(19488),c=t(60446),x=t.n(c),m=t(63516),u=t(65043),h=t(89849),p=t(66305),j=t(70579);const v=e=>{const{onClose:l,isOpen:t,fetchData:c,setAction:v,cData:f,LData:g}=e,[S,C]=(0,u.useState)(!1),b=(new Date).toISOString().split(".")[0],y=JSON.parse(localStorage.getItem("user")),k={sender:null===y||void 0===y?void 0:y._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:"",createBy:null===y||void 0===y?void 0:y._id},L=(0,m.Wx)({initialValues:k,validationSchema:h.Ar,onSubmit:(e,l)=>{let{resetForm:t}=l;W(),t()}}),{errors:z,touched:F,values:D,handleBlur:I,handleChange:w,handleSubmit:N,setFieldValue:T}=L,W=async()=>{try{C(!0),200===(await(0,p.d_)("api/phoneCall/add",D)).status&&(e.onClose(),c(1))}catch(l){console.log(l)}finally{C(!1)}};return(0,u.useEffect)((()=>{(async()=>{g&&g._id&&!0===e.lead?(T("recipient",g.leadPhoneNumber),T("createByLead",null===e||void 0===e?void 0:e.id),D.recipient=g.leadPhoneNumber):f&&f._id&&!0!==e.lead&&(T("recipient",null===f||void 0===f?void 0:f.phoneNumber),T("createByContact",null===e||void 0===e?void 0:e.id),D.recipient=null===f||void 0===f?void 0:f.phoneNumber)})()}),[e.id,f,g]),(0,j.jsxs)(n.aF,{onClose:l,isOpen:t,isCentered:!0,children:[(0,j.jsx)(n.mH,{}),(0,j.jsxs)(n.$m,{children:[(0,j.jsx)(n.rQ,{children:"Add Call "}),(0,j.jsx)(n.s_,{}),(0,j.jsx)(n.cw,{children:(0,j.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,j.jsx)(a.Text,{color:"red",children:"*"})]}),(0,j.jsx)(i.Input,{fontSize:"sm",type:"number",disabled:!0,onChange:w,onBlur:I,value:D.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:z.recipient&&F.recipient?"red.300":null}),(0,j.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",z.recipient&&F.recipient&&z.recipient]})]}),(0,j.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,j.jsx)(a.Text,{color:"red",children:"*"})]}),(0,j.jsx)(i.Input,{type:"datetime-local",fontSize:"sm",onChange:w,onBlur:I,min:x()(b).format("YYYY-MM-DD HH:mm"),value:D.startDate,name:"startDate",fontWeight:"500",borderColor:null!==z&&void 0!==z&&z.startDate&&null!==F&&void 0!==F&&F.startDate?"red.300":null}),(0,j.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",z.startDate&&F.startDate&&z.startDate]})]}),(0,j.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,j.jsx)(a.Text,{color:"red",children:"*"})]}),(0,j.jsx)(i.Input,{fontSize:"sm",onChange:w,onBlur:I,value:D.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:z.callDuration&&F.callDuration?"red.300":null}),(0,j.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",z.callDuration&&F.callDuration&&z.callDuration]})]}),(0,j.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,j.jsx)(s.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:w,onBlur:I,value:D.callNotes,name:"callNotes",fontWeight:"500",borderColor:z.callNotes&&F.callNotes?"red.300":null}),(0,j.jsxs)(a.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",z.callNotes&&F.callNotes&&z.callNotes]})]})]})}),(0,j.jsxs)(n.jl,{children:[(0,j.jsx)(d.Button,{size:"sm",variant:"brand",disabled:!!S,onClick:N,children:S?(0,j.jsx)(r.A,{}):"Save"}),(0,j.jsx)(d.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{L.resetForm(),l()},children:"Close"})]})]})]})}},14406:(e,l,t)=>{t(86178),t(65043),t(71094),t(76914),t(78152),t(9250),t(52853),t(70579)},20962:(e,l,t)=>{t.d(l,{A:()=>D});var n=t(14034),a=t(4450),o=t(85376),i=t(858),s=t(65043),d=t(20243),r=t(1009),c=t(34960),x=t(27149),m=t(73216),u=t(40848),h=t(22554),p=t(66305),j=t(70579);const v=e=>(0,j.jsx)("div",{children:(0,j.jsxs)(u.aF,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,j.jsx)(u.mH,{}),(0,j.jsxs)(u.$m,{children:[(0,j.jsxs)(u.rQ,{children:["Delete Document","one"===e.method?"":"s"]}),(0,j.jsx)(u.s_,{}),(0,j.jsxs)(u.cw,{children:["Are You Sure To Delete selected Document","one"===e.method?"":"s"," ?"]}),(0,j.jsxs)(u.jl,{children:[(0,j.jsx)(h.Button,{size:"sm",colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)e.deleteFile(e.id),e.onClose(!1);else if("many"===e.method)try{200===(await(0,p.Vn)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(l){console.log(l)}},children:"Yes"}),(0,j.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})});var f=t(78510),g=t(95104),S=t(84626),C=t(63516),b=t(42145),y=t(49565),k=t(91125),L=t(3388);const z=e=>{const{setLinkDocument:l}=e,[t,o]=(0,s.useState)(!1),[i,d]=(0,s.useState)([]),[r,c]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),v=JSON.parse(localStorage.getItem("user")),z=(0,C.Wx)({initialValues:{linkWith:"",linkContact:"",linkLead:""},onSubmit:(e,l)=>{let{resetForm:t}=l;B(),t()}}),{errors:F,touched:D,values:I,handleBlur:w,handleChange:N,handleSubmit:T,setFieldValue:W,resetForm:A}=z,B=async()=>{try{o(!0);let n=I.linkContact?{linkContact:I.linkContact}:{linkLead:I.linkLead},a=await(0,p.d_)("api/document/link-document/".concat(e.id),n);var t;if(a&&200===a.status)l((e=>!e)),e.onClose();else b.oR.error(null===(t=a.response.data)||void 0===t?void 0:t.message)}catch(n){console.log(n)}finally{o(!1)}};return(0,s.useEffect)((()=>{(async()=>{if("Contact"===I.linkWith){let e=await(0,p.x4)("superAdmin"===v.role?"api/contact/":"api/contact/?createBy=".concat(v._id));I.createBy=null===e||void 0===e?void 0:e._id,d((l=>{var t;return[...(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>({label:e.firstName+" "+e.lastName,value:e._id}))))||[]]}))}else if("lead"===I.linkWith){let e=await(0,p.x4)("superAdmin"===v.role?"api/lead/":"api/lead/?createBy=".concat(v._id));I.createBy=null===e||void 0===e?void 0:e._id,d((l=>{var t;return[...(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>({label:e.leadName,value:e._id}))))||[]]}))}})()}),[I.linkWith]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(u.aF,{onClose:e.onClose,isOpen:e.isOpen,children:[(0,j.jsx)(u.mH,{}),(0,j.jsxs)(u.$m,{children:[(0,j.jsx)(u.rQ,{children:"Link With Document"}),(0,j.jsx)(u.s_,{}),(0,j.jsx)(u.cw,{children:(0,j.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link With"}),(0,j.jsx)(g.z6,{onChange:e=>{A(),W("linkWith",e)},value:I.linkWith,children:(0,j.jsxs)(a.Stack,{direction:"row",children:[(0,j.jsx)(g.sx,{value:"Contact",children:"Contact"}),(0,j.jsx)(g.sx,{value:"lead",children:"Lead"})]})}),(0,j.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",F.linkWith&&D.linkWith&&F.linkWith]})]}),"Contact"===I.linkWith?(0,j.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Contact"}),(0,j.jsxs)(a.Flex,{children:[(0,j.jsx)(S.l6,{value:I.linkContact,name:"linkContact",onChange:N,mb:F.linkContact&&D.linkContact?void 0:"10px",fontWeight:"500",placeholder:"Link Contact",borderColor:F.linkContact&&D.linkContact?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,j.jsx)("option",{value:e.value,children:"Contact"===I.linkWith&&"".concat(e.label)},e.value)))}),(0,j.jsx)(h.IconButton,{onClick:()=>c(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(L.G2h,{})}),(0,j.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",F.linkContact&&D.linkContact&&F.linkContact]})]})]}):"lead"===I.linkWith&&(0,j.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Lead"}),(0,j.jsxs)(a.Flex,{children:[(0,j.jsx)(S.l6,{value:I.linkLead,name:"linkLead",onChange:N,mb:F.linkLead&&D.linkLead?void 0:"10px",fontWeight:"500",placeholder:"Link Lead",borderColor:F.linkLead&&D.linkLead?"red.300":null,children:null===i||void 0===i?void 0:i.map((e=>(0,j.jsx)("option",{value:e.value,children:"lead"===I.linkWith&&"".concat(e.label)},e.value)))}),(0,j.jsx)(h.IconButton,{onClick:()=>c(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(L.G2h,{})}),(0,j.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",F.linkLead&&D.linkLead&&F.linkLead]})]}),(0,j.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",F.linkLead&&D.linkLead&&F.linkLead]})]})]})}),(0,j.jsxs)(u.jl,{children:[(0,j.jsx)(h.Button,{size:"sm",colorScheme:"brand",rightIcon:(0,j.jsx)(n.LinkIcon,{}),mr:2,onClick:B,children:"Link"}),(0,j.jsx)(h.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>{e.onClose(!1),A()},children:"Cancel"})]})]})]}),(0,j.jsx)(y.A,{data:i,isOpen:r,onClose:c,fieldName:"linkContact",setFieldValue:W}),(0,j.jsx)(k.A,{data:i,isOpen:x,onClose:m,fieldName:"linkLead",setFieldValue:W})]})};var F=t(17368);const D=e=>{let{data:l,deleteFile:t,item:u,download:h,name:p,isFile:f,children:g,setLinkDocument:S,from:C}=e;const[b,y]=(0,s.useState)(!1),[k,L]=(0,s.useState)(!1),[D,I]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),T=(0,m.Zp)(),W=!f&&!!g;JSON.parse(localStorage.getItem("user"));return(0,j.jsxs)(a.List,{width:"100%",children:[(0,j.jsx)(a.ListItem,{alignItems:"center",display:"flex",children:(0,j.jsxs)(a.Text,{alignItems:"center",justifyContent:"space-between",display:"flex",width:"100%",onClick:W?()=>{y(!b)}:void 0,_hover:{cursor:"pointer",textDecoration:"none"},children:[(0,j.jsxs)(a.Flex,{width:"70%",alignItems:"center",children:[(0,j.jsx)(a.ListIcon,{as:f?r.QuH:d.NVk}),W&&(b?(0,j.jsx)(r.fK4,{}):(0,j.jsx)(r.fOo,{})),p]}),null!==u&&void 0!==u&&u.createByName?(0,j.jsxs)(a.Text,{children:["(",null===u||void 0===u?void 0:u.createByName,") "]}):null,!W&&(0,j.jsx)(a.Flex,{justifyContent:"right",width:"100%",children:(0,j.jsxs)(o.W1,{isLazy:!0,children:[(0,j.jsx)(o.IU,{children:(0,j.jsx)(F.txp,{})}),(0,j.jsxs)(o.cO,{position:"absolute",right:-5,pl:"0.5em",minW:"fit-content",children:[!C&&null!==l&&void 0!==l&&l.linkContact?(0,j.jsx)(o.Dr,{pr:2,w:"180px",onClick:()=>T("/contactView/".concat(null===l||void 0===l?void 0:l.linkContact)),icon:(0,j.jsx)(c.oau,{fontSize:15}),children:"Linked Contact"}):!C&&(null===l||void 0===l?void 0:l.linkLead)&&(0,j.jsx)(o.Dr,{pr:2,w:"180px",onClick:()=>T("/leadView/".concat(null===l||void 0===l?void 0:l.linkLead)),icon:(0,j.jsx)(x.ju$,{fontSize:15}),children:"Linked Lead"}),!C&&(0,j.jsx)(o.Dr,{pr:10,alignItems:"start",color:"blue",onClick:()=>(e=>{I(!0),N(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(n.LinkIcon,{fontSize:15}),children:"Link"}),function(e){const l=e.substring(e.lastIndexOf(".")).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp"].includes(l)}(null===l||void 0===l?void 0:l.img)&&(0,j.jsx)(o.Dr,{alignItems:"start",pr:10,color:"green",onClick:()=>window.open(null===l||void 0===l?void 0:l.img),icon:(0,j.jsx)(n.ViewIcon,{fontSize:15}),children:"View"}),(0,j.jsx)(o.Dr,{pr:10,alignItems:"start",onClick:()=>(e=>{h(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(n.DownloadIcon,{fontSize:15}),children:"Download"}),!C&&(0,j.jsx)(o.Dr,{alignItems:"start",pr:10,color:"red",onClick:()=>(e=>{L(!0),N(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(n.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})}),(0,j.jsx)(v,{isOpen:k,onClose:L,method:"one",deleteFile:t,id:w}),(0,j.jsx)(z,{isOpen:D,setLinkDocument:S,onClose:I,id:w})]})}),W&&(0,j.jsx)(i.SD,{in:b,animateOpacity:!0,children:(0,j.jsx)(a.List,{styleType:"disc",ml:4,children:g})})]})}},47936:(e,l,t)=>{t.d(l,{A:()=>A});var n=t(89379),a=t(40848),o=t(4450),i=t(78510),s=t(67682),d=t(95104),r=t(22554),c=t(53186),x=t(88587),m=t(65043),u=t(41046),h=t(19488),p=t(8860),j=t(70579);const v=e=>{const{onClose:l,isOpen:t,fieldName:n,setFieldValue:i,data:s}=e,[d,c]=(0,m.useState)([]),[x,v]=(0,m.useState)(!1),f=(JSON.parse(localStorage.getItem("user")),[...new Set(d)]);return(0,j.jsxs)(a.aF,{onClose:l,size:"full",isOpen:t,children:[(0,j.jsx)(a.mH,{}),(0,j.jsxs)(a.$m,{children:[(0,j.jsx)(a.rQ,{children:"Select Contact"}),(0,j.jsx)(a.s_,{}),(0,j.jsx)(a.cw,{children:x?(0,j.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,j.jsx)(h.A,{})}):(0,j.jsx)(u.A,{tableData:s,type:"multi",selectedValues:d,setSelectedValues:c,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,j.jsxs)(a.jl,{children:[(0,j.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{v(!0),i(n,f),l()}catch(e){console.log(e)}finally{v(!1)}},disabled:!!x,leftIcon:(0,j.jsx)(p.NLY,{}),children:[" ",x?(0,j.jsx)(h.A,{}):"Select"]}),(0,j.jsx)(r.Button,{onClick:()=>l(),children:"Close"})]})]})]})};var f=t(31206),g=t(71778),S=t(35066),C=t(71094),b=t(10216),y=t(76914),k=t(78152),L=t(85369);function z(e){const{columnsData:l,tableData:t,title:a,type:i,selectedValues:s,setSelectedValues:d}=e,r=(0,m.useMemo)((()=>l),[l]),c=(0,m.useMemo)((()=>t),[t]),[x,u]=(JSON.parse(localStorage.getItem("user")),(0,m.useState)()),h=(0,C.useTable)({columns:r,data:c,initialState:{pageIndex:0}},C.useGlobalFilter,C.useSortBy,C.usePagination),{getTableProps:p,getTableBodyProps:v,headerGroups:z,prepareRow:F,page:D,canPreviousPage:I,canNextPage:w,pageOptions:N,pageCount:T,gotoPage:W,nextPage:A,previousPage:B,setPageSize:H,state:{pageIndex:O,pageSize:_}}=h;N.length<x&&u(N.length);const G=(0,f.dU)("gray.500","white"),V=(0,f.dU)("gray.200","whiteAlpha.100"),P=(e,l)=>{"multi"===i?e.target.checked?d((e=>[...e,l])):d((e=>e.filter((e=>e!==l)))):e.target.checked?d(l):d(null)};return(0,j.jsxs)(b.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,j.jsx)(o.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,j.jsxs)(o.Text,{color:G,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[a,"  (",(0,j.jsx)(y.A,{targetNumber:null===c||void 0===c?void 0:c.length},null===c||void 0===c?void 0:c.length),")"]})}),(0,j.jsx)(o.Box,{overflowY:"auto",className:"table-container-property",children:(0,j.jsxs)(g.XI,(0,n.A)((0,n.A)({},p()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,j.jsx)(g.d8,{zIndex:1,children:null===z||void 0===z?void 0:z.map(((e,l)=>(0,m.createElement)(g.Tr,(0,n.A)((0,n.A)({},e.getHeaderGroupProps()),{},{key:l}),e.headers.map(((e,l)=>(0,m.createElement)(g.Th,(0,n.A)((0,n.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:l,borderColor:V}),(0,j.jsxs)(o.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,j.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,j.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,j.jsx)(L.GOR,{}):(0,j.jsx)(L.XhJ,{}):(0,j.jsx)(L.MjW,{})})]})))))))}),(0,j.jsxs)(g.NN,(0,n.A)((0,n.A)({},v()),{},{children:[0===(null===c||void 0===c?void 0:c.length)&&(0,j.jsx)(g.Tr,{children:(0,j.jsx)(g.Td,{colSpan:r.length,children:(0,j.jsx)(o.Text,{textAlign:"center",width:"100%",color:G,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===D||void 0===D?void 0:D.map(((e,l)=>{var t;return F(e),(0,m.createElement)(g.Tr,(0,n.A)((0,n.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:l}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";var a;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,j.jsxs)(o.Flex,{align:"center",children:["multi"===i?(0,j.jsx)(S.Sc,{colorScheme:"brandScheme",value:s,isChecked:s.includes(null===e||void 0===e?void 0:e.value),onChange:l=>P(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,j.jsx)(S.Sc,{colorScheme:"brandScheme",value:s,isChecked:s===(null===e||void 0===e?void 0:e.value),onChange:l=>P(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,j.jsx)(o.Text,{color:G,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.index)+1})]}):"Lead Name"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Email"===(null===e||void 0===e?void 0:e.column.Header)||"Lead PhoneNumber"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,j.jsx)(o.Text,{me:"10px",color:G,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("Lead Address"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Status"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Owner"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Score"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,j.jsx)(o.Text,{color:G,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,m.createElement)(g.Td,(0,n.A)((0,n.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))]}))]}))}),(null===c||void 0===c?void 0:c.length)>5&&(0,j.jsx)(k.A,{gotoPage:W,gopageValue:x,setGopageValue:u,pageCount:T,canPreviousPage:I,previousPage:B,canNextPage:w,pageOptions:N,setPageSize:H,nextPage:A,pageSize:_,pageIndex:O})]})}const F=e=>{const{onClose:l,isOpen:t,fieldName:n,setFieldValue:i,data:s}=e,[d,c]=(0,m.useState)([]),[x,u]=(0,m.useState)(!1),v=(JSON.parse(localStorage.getItem("user")),[...new Set(d)]);return(0,j.jsxs)(a.aF,{onClose:l,size:"full",isOpen:t,children:[(0,j.jsx)(a.mH,{}),(0,j.jsxs)(a.$m,{children:[(0,j.jsx)(a.rQ,{children:"Select Lead"}),(0,j.jsx)(a.s_,{}),(0,j.jsx)(a.cw,{children:x?(0,j.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,j.jsx)(h.A,{})}):(0,j.jsx)(z,{tableData:s,type:"multi",selectedValues:d,setSelectedValues:c,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,j.jsxs)(a.jl,{children:[(0,j.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{u(!0),i(n,v),l()}catch(e){console.log(e)}finally{u(!1)}},disabled:!!x,leftIcon:(0,j.jsx)(p.NLY,{}),children:[" ",x?(0,j.jsx)(h.A,{}):"Select"]}),(0,j.jsx)(r.Button,{onClick:()=>l(),children:"Close"})]})]})]})};var D=t(60446),I=t.n(D),w=t(63516),N=t(3388),T=t(97508),W=(t(42145),t(89849));t(66305);const A=e=>{var l,t,u;const{onClose:p,isOpen:f,setAction:g,from:S,fetchData:C,view:b}=e,[y,k]=(0,m.useState)([]),[L,z]=(0,m.useState)([]),[D,A]=(0,m.useState)(!1),[B,H]=(0,m.useState)(!1),[O,_]=(0,m.useState)(!1),G=(new Date).toISOString().split(".")[0],V=((0,T.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.data})),JSON.parse(localStorage.getItem("user"))),P=((0,T.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.contactData)||void 0===l?void 0:l.data})),{agenda:"",attendes:"contactView"===e.leadContect&&e.id?[e.id]:[],attendesLead:"leadView"===e.leadContect&&e.id?[e.id]:[],location:"",related:"contactView"===e.leadContect?"Contact":"leadView"===e.leadContect?"Lead":"None",dateTime:"",notes:"",createBy:null===V||void 0===V?void 0:V._id}),E=(0,w.Wx)({initialValues:P,validationSchema:W.pq,onSubmit:(e,l)=>{let{resetForm:t}=l}}),{errors:Y,touched:M,values:R,handleBlur:J,handleChange:Q,handleSubmit:$,setFieldValue:U}=E;(0,m.useEffect)((()=>{}),[e.id,R.related]);const X=null===(l="Contact"===R.related?L:y)||void 0===l?void 0:l.map((e=>(0,n.A)((0,n.A)({},e),{},{value:e._id,label:"Contact"===R.related?"".concat(e.firstName," ").concat(e.lastName):e.leadName})));return(0,j.jsxs)(a.aF,{onClose:p,isOpen:f,isCentered:!0,children:[(0,j.jsx)(a.mH,{}),(0,j.jsxs)(a.$m,{height:"580px",children:[(0,j.jsx)(a.rQ,{children:"Add Meeting "}),(0,j.jsx)(a.s_,{}),(0,j.jsxs)(a.cw,{overflowY:"auto",height:"400px",children:[(0,j.jsx)(v,{data:L,isOpen:B,onClose:H,fieldName:"attendes",setFieldValue:U}),(0,j.jsx)(F,{data:y,isOpen:O,onClose:_,fieldName:"attendesLead",setFieldValue:U}),(0,j.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Agenda",(0,j.jsx)(o.Text,{color:"red",children:"*"})]}),(0,j.jsx)(s.Input,{fontSize:"sm",onChange:Q,onBlur:J,value:R.agenda,name:"agenda",placeholder:"Agenda",fontWeight:"500",borderColor:Y.agenda&&M.agenda?"red.300":null}),(0,j.jsxs)(o.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",Y.agenda&&M.agenda&&Y.agenda]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Related To",(0,j.jsx)(o.Text,{color:"red",children:"*"})]}),(0,j.jsx)(d.z6,{onChange:e=>U("related",e),value:R.related,children:(0,j.jsxs)(o.Stack,{direction:"row",children:["contactView"===e.leadContect&&(0,j.jsx)(d.sx,{value:"Contact",children:"Contact"}),"leadView"===e.leadContect&&(0,j.jsx)(d.sx,{value:"Lead",children:"Lead"}),!e.leadContect&&(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsx)(d.sx,{value:"Contact",children:"Contact"}),(0,j.jsx)(d.sx,{value:"Lead",children:"Lead"})]})]})}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",fontSize:"sm",children:[" ",Y.related&&M.related&&Y.related]})]}),("Contact"===R.related?(null!==(t=null===L||void 0===L?void 0:L.length)&&void 0!==t?t:0)>0:(null!==(u=null===y||void 0===y?void 0:y.length)&&void 0!==u?u:0)>0)&&R.related&&(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(o.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,j.jsx)(o.Text,{w:"100%",children:(0,j.jsx)(x.CUIAutoComplete,{label:"Choose Preferred Attendes ".concat("Contact"===R.related?"Contact":"Lead"===R.related&&"Lead"),placeholder:"Type a Name",name:"attendes",items:X,className:"custom-autoComplete",selectedItems:null===X||void 0===X?void 0:X.filter((e=>"Contact"===R.related?null===R||void 0===R?void 0:R.attendes.includes(e._id):"Lead"===R.related&&(null===R||void 0===R?void 0:R.attendesLead.includes(e._id)))),onSelectedItemsChange:e=>{const l=e.selectedItems.map((e=>e._id));"Contact"===R.related?U("attendes",l):"Lead"===R.related&&U("attendesLead",l)}})}),(0,j.jsx)(r.IconButton,{mb:6,onClick:()=>"Contact"===R.related?H(!0):"Lead"===R.related&&_(!0),fontSize:"25px",icon:(0,j.jsx)(N.G2h,{})})]}),(0,j.jsxs)(o.Text,{color:"red",children:[" ",Y.attendes&&M.attendes&&Y.attendes]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Location"}),(0,j.jsx)(s.Input,{fontSize:"sm",onChange:Q,onBlur:J,value:R.location,name:"location",placeholder:"Location",fontWeight:"500",borderColor:Y.location&&M.location?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",fontSize:"sm",children:[" ",Y.location&&M.location&&Y.location]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Date Time",(0,j.jsx)(o.Text,{color:"red",children:"*"})]}),(0,j.jsx)(s.Input,{fontSize:"sm",type:"datetime-local",onChange:Q,onBlur:J,min:I()(G).format("YYYY-MM-DD HH:mm"),value:R.dateTime,name:"dateTime",placeholder:"Date Time",fontWeight:"500",borderColor:Y.dateTime&&M.dateTime?"red.300":null}),(0,j.jsxs)(o.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",Y.dateTime&&M.dateTime&&Y.dateTime]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Notes"}),(0,j.jsx)(c.T,{resize:"none",fontSize:"sm",placeholder:"Notes",onChange:Q,onBlur:J,value:R.notes,name:"notes",fontWeight:"500",borderColor:Y.notes&&M.notes?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",Y.notes&&M.notes&&Y.notes]})]})]})]}),(0,j.jsxs)(a.jl,{children:[(0,j.jsx)(r.Button,{size:"sm",variant:"brand",me:2,disabled:!!D,onClick:$,children:D?(0,j.jsx)(h.A,{}):"Save"}),(0,j.jsx)(r.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{E.resetForm(),p()},children:"Close"})]})]})]})}},98618:(e,l,t)=>{t.d(l,{A:()=>j});var n=t(40848),a=t(4450),o=t(78510),i=t(67682),s=t(22554),d=t(65043),r=t(63516),c=t(19488),x=t(66305),m=t(89849);const u=e=>{const l=new FormData;return Object.entries(e).forEach((e=>{let[t,n]=e;l.append(t,n)})),e.files.forEach((e=>{null===l||void 0===l||l.append("files",e)})),l};var h=t(8966),p=t(70579);const j=e=>{let{setAddDocument:l,addDocument:t,linkId:j,from:v,setAction:f,fetchData:g}=e;const[S,C]=(0,d.useState)(!1),b=JSON.parse(localStorage.getItem("user")),y={folderName:"",files:"",filename:"",linkLead:"lead"===v&&j,linkContact:"contact"===v&&j,createBy:b._id},k=(0,r.Wx)({initialValues:y,validationSchema:m.L8,onSubmit:(e,l)=>{let{resetForm:t}=l;W()}}),{errors:L,touched:z,values:F,handleBlur:D,handleChange:I,handleSubmit:w,setFieldValue:N,resetForm:T}=k,W=async()=>{try{C(!0);const e=u(F);let t=await(0,x.d_)("lead"===v?"api/document/addDocumentLead":"api/document/addDocumentContact",e);t&&200===t.status&&(k.resetForm(),g(2),l(!1))}catch(e){console.log(e)}finally{C(!1)}};return(0,p.jsxs)(n.aF,{onClose:()=>l(!1),isOpen:t,isCentered:!0,children:[(0,p.jsx)(n.mH,{}),(0,p.jsxs)(n.$m,{maxWidth:"2xl",children:[(0,p.jsx)(n.rQ,{}),(0,p.jsx)(n.s_,{}),(0,p.jsxs)(n.cw,{children:[(0,p.jsxs)(a.Box,{children:[(0,p.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Folder Name",(0,p.jsx)(a.Text,{color:"red",children:"*"})]}),(0,p.jsx)(i.Input,{fontSize:"sm",onChange:I,value:F.folderName,name:"folderName",placeholder:"Enter Folder Name",fontWeight:"500",borderColor:null!==L&&void 0!==L&&L.folderName&&null!==z&&void 0!==z&&z.folderName?"red.300":null}),(0,p.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",L.folderName&&z.folderName&&L.folderName]})]}),(0,p.jsxs)(a.Box,{children:[(0,p.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"File Name"}),(0,p.jsx)(i.Input,{fontSize:"sm",onChange:I,value:F.filename,name:"filename",placeholder:"Enter File Name",fontWeight:"500",borderColor:null!==L&&void 0!==L&&L.filename&&null!==z&&void 0!==z&&z.filename?"red.300":null}),(0,p.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",L.filename&&z.filename&&L.filename]})]}),(0,p.jsx)(h.A,{count:F.files.length,onFileSelect:e=>N("files",e)}),"              "]}),(0,p.jsxs)(n.jl,{children:[(0,p.jsx)(s.Button,{size:"sm",variant:"brand",mr:2,onClick:w,disabled:!!S,children:S?(0,p.jsx)(c.A,{}):"Save"}),(0,p.jsx)(s.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>{l(!1),T()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=9814.2bca5b7d.chunk.js.map