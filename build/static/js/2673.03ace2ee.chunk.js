"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2673],{22876:(e,s,a)=>{a(19488),a(65043),a(42145),a(14731),a(89849),a(66305),a(97508),a(84066),a(70579)},49201:(e,s,a)=>{a(19488),a(65043),a(42145),a(89849),a(66305),a(70579)},52673:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var t=a(65043),l=a(73216),r=a(35475),n=a(14034),i=a(4450),o=a(85376),d=a(22554),c=a(66305),m=a(88031),u=a(17368),h=a(34960),x=(a(49201),a(22876),a(63516)),p=a(80899),v=a(40848),f=a(78510),j=a(67682),S=a(19488),b=a(43017),N=a(97508),g=a(70579);const C=e=>{const{allData:s,advanceSearch:a,setAdvanceSearch:t,isLoding:l,setDisplaySearchData:r,setSearchbox:n}=e,o=(0,N.wA)(),c=p.Ik({firstName:p.Yj(),username:p.Yj().email("User Email is invalid"),lastName:p.Yj()}),m=(0,x.Wx)({initialValues:{firstName:"",username:"",lastName:""},validationSchema:c,onSubmit:(e,a)=>{let{resetForm:l}=a;o((0,b.gB)(e)),o((0,b.DW)({values:e,allData:s,type:"Users"})),l();const i=[{name:["firstName"],value:e.firstName},{name:["lastName"],value:e.lastName},{name:["username"],value:e.username}];o((0,b.Tr)(i.filter((e=>e.value)))),r(!0),t(!1),n("")}}),{errors:u,touched:h,values:C,handleBlur:y,handleChange:I,handleSubmit:w,resetForm:z,dirty:D}=m;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(v.aF,{onClose:()=>{t(!1),z()},isOpen:a,isCentered:!0,children:[(0,g.jsx)(v.mH,{}),(0,g.jsxs)(v.$m,{children:[(0,g.jsx)(v.rQ,{children:"Advance Search"}),(0,g.jsx)(v.s_,{onClick:()=>{t(!1),z()}}),(0,g.jsx)(v.cw,{children:(0,g.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"First Name"}),(0,g.jsx)(j.Input,{fontSize:"sm",onChange:I,onBlur:y,value:null===C||void 0===C?void 0:C.firstName,name:"firstName",placeholder:"Enter First Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.firstName&&h.firstName&&u.firstName]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Last Name"}),(0,g.jsx)(j.Input,{fontSize:"sm",onChange:I,onBlur:y,value:null===C||void 0===C?void 0:C.lastName,name:"lastName",placeholder:"Enter Last Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.lastName&&h.lastName&&u.lastName]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Email Id"}),(0,g.jsx)(j.Input,{fontSize:"sm",onChange:I,onBlur:y,value:null===C||void 0===C?void 0:C.username,name:"username",placeholder:"Enter User Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.username&&h.username&&u.username]})]})]})}),(0,g.jsxs)(v.jl,{children:[(0,g.jsx)(d.Button,{size:"sm",variant:"brand",mr:2,onClick:w,disabled:!(!l&&D),children:l?(0,g.jsx)(S.A,{}):"Search"}),(0,g.jsx)(d.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>z(),children:"Clear"})]})]})]})})};var y=a(48177),I=a(66854);const w=()=>{const[e,s]=(0,t.useState)(!1),[a,x]=(0,t.useState)(!1),[p,v]=(0,t.useState)({}),[f,j]=(0,t.useState)(!1),[S,b]=(0,t.useState)(),[N,w]=(0,t.useState)(!1),[z,D]=(0,t.useState)([]),[A,W]=(0,t.useState)(!1),[B,F]=(0,t.useState)([]),[k,T]=(0,t.useState)(""),L=(0,l.Zp)(),[E,O]=(0,t.useState)(!1),[G,V]=(0,t.useState)([]),[_,U]=(0,t.useState)(!1),[H,R]=(0,t.useState)([]),[P,J]=(0,t.useState)(""),Y=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Email Id",accessor:"username",cell:e=>{var s;return(0,g.jsx)(r.N_,{to:"/userView/".concat(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values._id),children:(0,g.jsx)(i.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Role",accessor:"role"},{Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var s;let{row:a}=e;return(0,g.jsx)(i.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,g.jsxs)(o.W1,{isLazy:!0,children:[(0,g.jsx)(o.IU,{children:(0,g.jsx)(u.txp,{})}),(0,g.jsxs)(o.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(0,g.jsx)(o.Dr,{py:2.5,onClick:()=>{v(null===a||void 0===a?void 0:a.original),j(!0),b(null===a||void 0===a?void 0:a.original._id),J("edit")},icon:(0,g.jsx)(n.EditIcon,{mb:1,fontSize:15}),children:"Edit"}),(0,g.jsx)(o.Dr,{py:2.5,color:"green",onClick:()=>L("/userView/".concat(null===a||void 0===a?void 0:a.values._id)),icon:(0,g.jsx)(n.ViewIcon,{mb:1,fontSize:15}),children:"View"}),"superAdmin"===(null===a||void 0===a||null===(s=a.original)||void 0===s?void 0:s.role)?"":(0,g.jsx)(o.Dr,{py:2.5,color:"red",onClick:()=>{D([null===a||void 0===a?void 0:a.original._id]),w(!0)},icon:(0,g.jsx)(n.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})})}}],Q=async()=>{var e;O(!0);let s=await(0,c.x4)("api/user/");V(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.user),O(!1)};return(0,t.useEffect)((()=>{Q()}),[e]),(0,g.jsxs)("div",{children:[(0,g.jsx)(m.A,{title:"Users",isLoding:E,columnData:null!==Y&&void 0!==Y?Y:[],allData:null!==G&&void 0!==G?G:[],tableData:_?H:G,searchDisplay:_,setSearchDisplay:U,searchedDataOut:H,setSearchedDataOut:R,tableCustomFields:[],access:{create:!0,edit:!0,delete:!0,view:!0},onOpen:()=>{J("add"),j(!0)},selectedValues:z,setSelectedValues:D,setDelete:w,BackButton:(0,g.jsx)(d.Button,{onClick:()=>L("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,g.jsx)(h.m6W,{}),ml:2,children:"Back"}),AdvanceSearch:(0,g.jsx)(d.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,g.jsx)(n.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>W(!0),children:"Advance Search"}),getTagValuesOutSide:B,searchboxOutside:k,setGetTagValuesOutside:F,setSearchboxOutside:T,handleSearchType:"UsersSearch"}),(0,g.jsx)(I.A,{isOpen:f,onClose:()=>{j(!1)},data:p,selectedId:S,userAction:P,setUserAction:J,fetchData:Q}),(0,g.jsx)(y.A,{isOpen:N,onClose:()=>w(!1),type:"User",handleDeleteData:async()=>{try{O(!0),200===(await(0,c.Vn)("api/user/deleteMany",z)).status&&(D([]),w(!1),s((e=>!e)))}catch(e){console.log(e)}finally{O(!1)}},ids:"",selectedValues:z}),(0,g.jsx)(C,{advanceSearch:A,setAdvanceSearch:W,setSearchedData:R,setDisplaySearchData:U,allData:null!==G&&void 0!==G?G:[],setAction:s,setGetTagValues:F,setSearchbox:T})]})}},66854:(e,s,a)=>{a.d(s,{A:()=>b});var t=a(89379),l=a(14034),r=a(40848),n=a(22554),i=a(4450),o=a(78510),d=a(67682),c=a(3458),m=a(19488),u=a(63516),h=a(65043),x=a(27149),p=a(22285),v=a(42145),f=a(89849),j=a(66305),S=a(70579);const b=e=>{const{onClose:s,isOpen:a,setAction:b,data:N,userAction:g,userData:C,selectedId:y,fetchData:I,setUserAction:w}=e,[z,D]=(0,h.useState)(!1),[A,W]=h.useState(!1),B={firstName:"add"===g?"":null===N||void 0===N?void 0:N.firstName,lastName:"add"===g?"":null===N||void 0===N?void 0:N.lastName,username:"add"===g?"":null===N||void 0===N?void 0:N.username,phoneNumber:"add"===g?"":null===N||void 0===N?void 0:N.phoneNumber,password:"add"===g?"":null===N||void 0===N?void 0:N.password},F=JSON.parse(window.localStorage.getItem("user")),k=(0,u.Wx)({initialValues:B,validationSchema:f.vJ,enableReinitialize:!0,onSubmit:e=>{H()}}),{errors:T,touched:L,values:E,handleBlur:O,handleChange:G,handleSubmit:V,setFieldValue:_,resetForm:U}=k,H=async()=>{if("add"===g)try{D(!0);let a=await(0,j.d_)("api/user/register",E);var e;if(a&&200===a.status)s(),U(),b((e=>!e)),w("");else v.oR.error(null===(e=a.response.data)||void 0===e?void 0:e.message)}catch(l){console.log(l)}finally{D(!1)}else if("edit"===g)try{D(!0);let e=await(0,j.yP)("api/user/edit/".concat(y),E);if(e&&200===e.status){I();let e=C;if((null===F||void 0===F?void 0:F._id)===y){e&&"object"===typeof e&&(e=(0,t.A)((0,t.A)({},e),{},{firstName:null===E||void 0===E?void 0:E.firstName,lastName:null===E||void 0===E?void 0:E.lastName}));const s=JSON.stringify(e);localStorage.setItem("user",s)}s(),w(""),b((e=>!e))}else{var a;v.oR.error(null===(a=e.response.data)||void 0===a?void 0:a.message)}}catch(l){console.log(l)}finally{D(!1)}};return(0,S.jsxs)(r.aF,{isOpen:a,isCentered:!0,children:[(0,S.jsx)(r.mH,{}),(0,S.jsxs)(r.$m,{children:[(0,S.jsxs)(r.rQ,{justifyContent:"space-between",display:"flex",children:["add"===g?"Add":"Edit"," User",(0,S.jsx)(n.IconButton,{onClick:s,icon:(0,S.jsx)(l.CloseIcon,{})})]}),(0,S.jsx)(r.cw,{children:(0,S.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["First Name",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(d.Input,{fontSize:"sm",onChange:G,onBlur:O,value:E.firstName,name:"firstName",placeholder:"firstName",fontWeight:"500",borderColor:T.firstName&&L.firstName?"red.300":null}),(0,S.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",T.firstName&&L.firstName&&T.firstName]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Last Name"}),(0,S.jsx)(d.Input,{fontSize:"sm",onChange:G,onBlur:O,value:E.lastName,name:"lastName",placeholder:"Last Name",fontWeight:"500",borderColor:T.lastName&&L.lastName?"red.300":null}),(0,S.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",T.lastName&&L.lastName&&T.lastName]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Email",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(d.Input,{fontSize:"sm",type:"email",onChange:G,onBlur:O,value:E.username,name:"username",disabled:"edit"===g,placeholder:"Email Address",fontWeight:"500",borderColor:T.username&&L.username?"red.300":null}),(0,S.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",T.username&&L.username&&T.username]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Phone Number",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsxs)(d.InputGroup,{children:[(0,S.jsx)(d.InputLeftElement,{pointerEvents:"none",children:(0,S.jsx)(l.PhoneIcon,{color:"gray.300",borderRadius:"16px"})}),(0,S.jsx)(d.Input,{type:"tel",fontSize:"sm",onChange:G,onBlur:O,value:E.phoneNumber,name:"phoneNumber",fontWeight:"500",borderColor:T.phoneNumber&&L.phoneNumber?"red.300":null,placeholder:"Phone number",borderRadius:"16px"})]}),(0,S.jsx)(i.Text,{mb:"10px",color:"red",children:T.phoneNumber&&L.phoneNumber&&T.phoneNumber})]}),"edit"!==g&&(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Password"}),(0,S.jsxs)(d.InputGroup,{size:"md",children:[(0,S.jsx)(d.Input,{isRequired:!0,fontSize:"sm",placeholder:"Enter Your Password",name:"password",size:"lg",variant:"auth",type:A?"text":"password",value:E.password,onChange:G,onBlur:O,borderColor:T.password&&L.password?"red.300":null,className:T.password&&L.password?"isInvalid":null}),(0,S.jsx)(d.InputRightElement,{display:"flex",alignItems:"center",mt:"4px",children:(0,S.jsx)(c.In,{color:"gray.400",_hover:{cursor:"pointer"},as:A?p.B6J:x.kIi,onClick:()=>W(!A)})})]}),(0,S.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",T.password&&L.password&&T.password]})]})]})}),(0,S.jsxs)(r.jl,{children:[(0,S.jsx)(n.Button,{variant:"brand",size:"sm",disabled:!!z,onClick:V,children:z?(0,S.jsx)(m.A,{}):"Save"}),(0,S.jsx)(n.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{k.resetForm(),s()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=2673.03ace2ee.chunk.js.map