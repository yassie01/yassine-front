"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[7083],{37083:(e,l,t)=>{t.r(l),t.d(l,{default:()=>O});var o=t(19754),i=t(4450),n=t(22554),s=t(65043),a=t(66305),r=t(88031),d=t(34960),c=t(73216),u=t(89379),x=t(31206),v=t(40848),h=t(71778),p=t(19488),m=t(71094),g=t(35066),j=t(63516),f=t(52853),S=t(70579);const y=function(e){const{columnsData:l,name:t,tableData:o,fetchData:r,setAccess:d,_id:c,setRoleModal:y,editModal:C,setEditModal:T}=e,A=(0,x.dU)("secondaryGray.900","white"),b=(0,x.dU)("gray.200","whiteAlpha.100"),w=(0,s.useMemo)((()=>l),[l]),[z,P]=(0,s.useState)(!1),[H,k]=(0,s.useState)(),D=(0,s.useMemo)((()=>o||[]),[o]),W=(0,m.useTable)({columns:w,data:D,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableBodyProps:N,headerGroups:O,prepareRow:F,page:I,pageOptions:B,setPageSize:M,state:{pageIndex:R,pageSize:G}}=W;B.length<H&&k(B.length);const E={roleName:t,access:o},_=(0,j.Wx)({initialValues:E,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:t}=l;$()}}),{values:U,handleSubmit:V,setFieldValue:L,resetForm:X}=_,Q=(e,l,t)=>o=>{const{checked:i}=o.target,n=U.access.findIndex((e=>"Leads"===e.title)),s=U.access.findIndex((e=>"Contacts"===e.title)),a=U.access.map(((o,n)=>{if(n===e){const e=(0,u.A)((0,u.A)({},o),{},{[l]:i});return t&&!i?e[t]=e.update=e.delete=i:t&&(e[t]=i),e}return o})),r=a.map(((e,l)=>{var o,r;return!t||!1!==i||null!==(o=a[s])&&void 0!==o&&o.view||null!==(r=a[n])&&void 0!==r&&r.view||!["Emails","Calls","Meetings"].includes(e.title)?e:(0,u.A)((0,u.A)({},e),{},{create:!1,delete:!1,update:!1,view:!1})}));L("access",r)},$=async()=>{try{P(!0),d(null===U||void 0===U?void 0:U.access),200===(await(0,a.yP)("api/role-access/edit/".concat(c),U)).status&&(T(!1),r(),y(!0))}catch(e){console.log(e)}finally{P(!1)}},q=e=>{var l;return!!["Emails","Calls","Meetings"].includes(e.title)&&!(null!==U&&void 0!==U&&null!==(l=U.access)&&void 0!==l&&l.some((e=>("Contacts"===e.title||"Leads"===e.title)&&e.view)))};return(0,s.useEffect)((()=>{r()}),[C]),(0,s.useEffect)((()=>{Array.isArray(D)&&(null===D||void 0===D?void 0:D.length)>0&&M(null===D||void 0===D?void 0:D.length)}),[D,M]),(0,S.jsxs)(v.aF,{onClose:()=>T(!1),isOpen:C,isCentered:!0,size:"xl",children:[(0,S.jsx)(v.mH,{}),(0,S.jsxs)(v.$m,{height:"580px",maxWidth:"2xl",children:[(0,S.jsxs)(v.rQ,{textTransform:"capitalize",children:[t," Access"]}),(0,S.jsx)(v.s_,{}),(0,S.jsx)(v.cw,{overflow:"auto",height:"400px",children:(0,S.jsxs)(h.XI,{children:[(0,S.jsx)(h.d8,{children:null===O||void 0===O?void 0:O.map(((e,l)=>{var t;return(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:l}),null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,S.jsx)(h.Th,{sx:{width:"10px"},pe:"10px",borderColor:b,display:!1===e.display&&"none",children:(0,S.jsx)(i.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:!1!==e.display&&e.render("Header")})},l))))}))}),(0,S.jsx)(h.NN,(0,u.A)((0,u.A)({},N()),{},{children:z?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,S.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(p.A,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:w.length,children:(0,S.jsx)(i.Text,{textAlign:"center",width:"100%",color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===I||void 0===I?void 0:I.map(((e,l)=>{var t;return F(e),(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:l}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,t)=>{let o="";if("title"===(null===e||void 0===e?void 0:e.column.Header))o=(0,S.jsx)(i.Text,{me:"10px",color:A,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("create"===(null===e||void 0===e?void 0:e.column.Header)){var n,a,r;o=(0,S.jsx)(i.Text,{color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{disabled:q(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original),isChecked:null===U||void 0===U||null===(a=U.access[l])||void 0===a?void 0:a.create,defaultChecked:null===U||void 0===U||null===(r=U.access[l])||void 0===r?void 0:r.create,onChange:Q(l,"create","view")})})}else if("view"===(null===e||void 0===e?void 0:e.column.Header)){var d,c,x;o=(0,S.jsx)(i.Text,{color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{disabled:q(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.original),isChecked:null===U||void 0===U||null===(c=U.access[l])||void 0===c?void 0:c.view,defaultChecked:null===U||void 0===U||null===(x=U.access[l])||void 0===x?void 0:x.view,onChange:Q(l,"view","create")})})}else if("update"===(null===e||void 0===e?void 0:e.column.Header)){var v,p,m;o=(0,S.jsx)(i.Text,{color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{disabled:!(null!==U&&void 0!==U&&null!==(v=U.access[l])&&void 0!==v&&v.view),isChecked:null===U||void 0===U||null===(p=U.access[l])||void 0===p?void 0:p.update,defaultChecked:null===U||void 0===U||null===(m=U.access[l])||void 0===m?void 0:m.update,onChange:Q(l,"update")})})}else if("delete"===(null===e||void 0===e?void 0:e.column.Header)){var j,f,y;o=(0,S.jsx)(i.Text,{color:A,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(g.Sc,{disabled:!(null!==U&&void 0!==U&&null!==(j=U.access[l])&&void 0!==j&&j.view),isChecked:null===U||void 0===U||null===(f=U.access[l])||void 0===f?void 0:f.delete,defaultChecked:null===U||void 0===U||null===(y=U.access[l])||void 0===y?void 0:y.delete,onChange:Q(l,"delete")})})}return(0,s.createElement)(h.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}}),o)})))}))}))]})}),(0,S.jsxs)(v.jl,{children:[(0,S.jsx)(n.Button,{size:"sm",variant:"brand",onClick:V,children:"Save"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{X(),T(!1),y(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};var C=t(85369),T=t(78152),A=t(4448);const b=e=>{const{setUserModal:l,userModal:t,tableData:o,columnsData:r,setOpenUser:d,_id:c,userRole:p,fetchData:j}=e,y=(0,x.dU)("secondaryGray.900","white"),b=(0,x.dU)("gray.200","whiteAlpha.100"),w=(0,s.useMemo)((()=>r),[r]),[z,P]=(0,s.useState)(!1),[H,k]=(0,s.useState)([]),D=(0,s.useMemo)((()=>o),[o]),[W,N]=(0,s.useState)(),O=(0,m.useTable)({columns:w,data:D,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableProps:F,getTableBodyProps:I,headerGroups:B,prepareRow:M,page:R,canPreviousPage:G,canNextPage:E,pageOptions:_,pageCount:U,gotoPage:V,nextPage:L,previousPage:X,setPageSize:Q,state:{pageIndex:$,pageSize:q}}=O;_.length<W&&N(_.length);const Y=[...new Set(H)];(0,s.useEffect)((()=>{const e=null===p||void 0===p?void 0:p.map((e=>e._id));k(e)}),[t]);return(0,S.jsxs)(v.aF,{onClose:()=>l(!1),isOpen:t,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,S.jsx)(v.mH,{}),(0,S.jsxs)(v.$m,{children:[(0,S.jsx)(v.rQ,{children:(0,S.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,S.jsx)(i.Text,{children:"Users"}),(0,S.jsx)(v.s_,{mt:"2"})]})}),(0,S.jsxs)(v.cw,{overflowY:"auto",height:"400px",children:[(0,S.jsxs)(h.XI,(0,u.A)((0,u.A)({},F()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,S.jsx)(h.d8,{children:null===B||void 0===B?void 0:B.map(((e,l)=>{var t;return(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:l}),null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,s.createElement)(h.Th,(0,u.A)((0,u.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:l,borderColor:b}),(0,S.jsxs)(i.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,S.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,S.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,S.jsx)(C.GOR,{}):(0,S.jsx)(C.XhJ,{}):(0,S.jsx)(C.MjW,{})})]})))))}))}),(0,S.jsx)(h.NN,(0,u.A)((0,u.A)({},I()),{},{children:z?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,S.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:y,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(A.y,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:w.length,children:(0,S.jsx)(i.Text,{textAlign:"center",width:"100%",color:y,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===R||void 0===R?void 0:R.map(((e,l)=>{var t;return M(e),(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:l}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsxs)(i.Flex,{align:"center",children:[(0,S.jsx)(g.Sc,{colorScheme:"brandScheme",value:H,isChecked:H.includes(null===e||void 0===e?void 0:e.value),onChange:l=>((e,l)=>{e.target.checked?k((e=>[...e,l])):k((e=>e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,S.jsx)(i.Text,{color:y,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Text,{me:"10px",color:y,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Text,{me:"10px",color:y,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(t=(0,S.jsx)(i.Text,{color:y,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(h.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))}))]})),(null===D||void 0===D?void 0:D.length)>5&&(0,S.jsx)(T.A,{gotoPage:V,gopageValue:W,setGopageValue:N,pageCount:U,canPreviousPage:G,previousPage:X,canNextPage:E,pageOptions:_,setPageSize:Q,nextPage:L,pageSize:q,pageIndex:$})]}),(0,S.jsxs)(v.jl,{children:[(0,S.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{(async()=>{200===(await(0,a.yP)("api/role-access/assignedUsers/".concat(c),Y)).status&&(l(!1),j())})(),d(!0)},children:"Save"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{l(!1),k([]),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};const w=function(e){const{tableData:l,columnsData:t,isOpen:o,_id:r,setRoleModal:d,setOpenUser:c,fetchData:g}=e,j=(0,x.dU)("secondaryGray.900","white"),y=(0,x.dU)("gray.200","whiteAlpha.100"),A=(0,s.useMemo)((()=>t),[t]),[w,z]=(0,s.useState)([]),[P,H]=(0,s.useState)(!1),k=(0,s.useMemo)((()=>l),[l]),[D,W]=(0,s.useState)(!1),[N,O]=(0,s.useState)([]),[F,I]=(0,s.useState)(),B=(0,m.useTable)({columns:A,data:k,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableProps:M,getTableBodyProps:R,headerGroups:G,prepareRow:E,page:_,canPreviousPage:U,canNextPage:V,pageOptions:L,pageCount:X,gotoPage:Q,nextPage:$,previousPage:q,setPageSize:Y,state:{pageIndex:J,pageSize:Z}}=B;L.length<F&&I(L.length);const K=async()=>{var e;let l=await(0,a.x4)("api/user/?role=user");O(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user)};return(0,s.useEffect)((()=>{K()}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(v.aF,{onClose:()=>c(!1),isOpen:o,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,S.jsx)(v.mH,{}),(0,S.jsxs)(v.$m,{children:[(0,S.jsx)(v.rQ,{height:"580px",children:(0,S.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,S.jsx)(i.Text,{children:"Users"}),(0,S.jsx)(n.Button,{variant:"brand",size:"sm",me:"2rem",onClick:()=>{c(!1),W(!0)},children:"Manage Users"}),(0,S.jsx)(v.s_,{mt:"2"})]})}),(0,S.jsxs)(v.cw,{overflow:"auto",height:"400px",children:[(0,S.jsxs)(h.XI,(0,u.A)((0,u.A)({},M()),{},{variant:"simple",color:"gray.500",mb:"24px",children:[(0,S.jsx)(h.d8,{children:null===G||void 0===G?void 0:G.map(((e,l)=>{var t;return(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:l}),null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,s.createElement)(h.Th,(0,u.A)((0,u.A)({},e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps())),{},{pe:"10px",key:l,borderColor:y}),(0,S.jsxs)(i.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,S.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,S.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,S.jsx)(C.GOR,{}):(0,S.jsx)(C.XhJ,{}):(0,S.jsx)(C.MjW,{})})]})))))}))}),(0,S.jsx)(h.NN,(0,u.A)((0,u.A)({},R()),{},{children:P?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:null===A||void 0===A?void 0:A.length,children:(0,S.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:j,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(p.A,{})})})}):0===(null===k||void 0===k?void 0:k.length)?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:A.length,children:(0,S.jsx)(i.Text,{textAlign:"center",width:"100%",color:j,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===_||void 0===_?void 0:_.map(((e,l)=>{var t;return E(e),(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:l}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Flex,{align:"center",children:(0,S.jsx)(i.Text,{color:j,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Text,{me:"10px",color:j,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Text,{me:"10px",color:j,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(t=(0,S.jsx)(i.Text,{color:j,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(h.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"}),t)})))}))}))]})),(null===k||void 0===k?void 0:k.length)>5&&(0,S.jsx)(T.A,{gotoPage:Q,gopageValue:F,setGopageValue:I,pageCount:X,canPreviousPage:U,previousPage:q,canNextPage:V,pageOptions:L,setPageSize:Y,nextPage:$,pageSize:Z,pageIndex:J})]}),(0,S.jsx)(v.jl,{children:(0,S.jsx)(n.Button,{size:"sm",onClick:()=>{c(!1),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})})]})]}),(0,S.jsx)(b,{fetchData:g,userModal:D,setOpenUser:c,_id:r,setUserModal:W,userFetchData:K,userRole:l,tableData:N||[],columnsData:t||[]})]})};const z=function(e){const{name:l,tableData:t,fetchData:o,columnsData:r,isOpen:d,setAction:c,setAccess:g,_id:j,onOpen:C,setRoleModal:T}=e,A=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"}],b=(0,x.dU)("secondaryGray.900","white"),z=(0,x.dU)("gray.200","whiteAlpha.100"),P=(0,s.useMemo)((()=>r),[r]),[H,k]=(0,s.useState)(!1),[D,W]=(0,s.useState)(!1),[N,O]=(0,s.useState)(),[F,I]=(0,s.useState)(),B=(0,s.useMemo)((()=>t||[]),[t]),[M,R]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)([])),G=(0,m.useTable)({columns:P,data:B,initialState:{pageIndex:0,pageSize:500}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableBodyProps:E,headerGroups:_,prepareRow:U,page:V,pageOptions:L,state:{pageIndex:X,pageSize:Q}}=G;L.length<F&&I(L.length);const $=async()=>{if(j){let e=await(0,a.x4)("api/role-access/assignedUsers/",j);R(null===e||void 0===e?void 0:e.data)}};return(0,s.useEffect)((()=>{$()}),[j]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(v.aF,{onClose:()=>T(!1),isOpen:d,isCentered:!0,size:"xl",children:[(0,S.jsx)(v.mH,{}),(0,S.jsxs)(v.$m,{height:"580px",maxWidth:"2xl",children:[(0,S.jsx)(v.rQ,{children:(0,S.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,S.jsxs)(i.Text,{textTransform:"capitalize",children:[l," Access"]}),(0,S.jsxs)(i.Text,{style:{marginRight:"25px",fontSize:"15px",fontWeight:"700",marginTop:"5px",color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>{O(!0),T(!1)},children:["View user's in ",l," role"]}),(0,S.jsx)(v.s_,{mt:"2"})]})}),(0,S.jsx)(v.cw,{overflow:"auto",height:"400px",children:(0,S.jsxs)(h.XI,{children:[(0,S.jsx)(h.d8,{children:null===_||void 0===_?void 0:_.map(((e,l)=>{var t;return(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},e.getHeaderGroupProps()),{},{key:l}),null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,S.jsx)(h.Th,{sx:{width:"10px"},borderColor:z,display:!1===e.display&&"none",children:!1!==e.display&&e.render("Header")},l))))}))}),(0,S.jsx)(h.NN,(0,u.A)((0,u.A)({},E()),{},{children:H?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:null===P||void 0===P?void 0:P.length,children:(0,S.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(p.A,{})})})}):0===(null===B||void 0===B?void 0:B.length)?(0,S.jsx)(h.Tr,{children:(0,S.jsx)(h.Td,{colSpan:P.length,children:(0,S.jsx)(i.Text,{textAlign:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,S.jsx)(f.A,{})})})}):null===V||void 0===V?void 0:V.map(((e,l)=>{var t;return U(e),(0,s.createElement)(h.Tr,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getRowProps()),{},{key:l}),null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";return"title"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,S.jsx)(i.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("create"===(null===e||void 0===e?void 0:e.column.Header)||"view"===(null===e||void 0===e?void 0:e.column.Header)||"update"===(null===e||void 0===e?void 0:e.column.Header)||"delete"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,S.jsx)(i.Text,{color:b,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?"Yes":"No"})),(0,s.createElement)(h.Td,(0,u.A)((0,u.A)({},null===e||void 0===e?void 0:e.getCellProps()),{},{key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}}),t)})))}))}))]})}),(0,S.jsxs)(v.jl,{children:[(0,S.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{W(!0),T(!1)},children:"Change Access"}),(0,S.jsx)(n.Button,{size:"sm",onClick:()=>T(!1),variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]}),(0,S.jsx)(y,{tableData:null!==t&&void 0!==t?t:[],accessRole:null!==t&&void 0!==t?t:[],setAccess:g,setRoleModal:T,columnsData:null!==r&&void 0!==r?r:[],_id:j,fetchData:o,name:l,setEditModal:W,setAction:c,editModal:D}),(0,S.jsx)(w,{isOpen:N,setRoleModal:T,setOpenUser:O,onOpen:C,columnsData:null!==A&&void 0!==A?A:[],tableData:null!==M&&void 0!==M?M:[],setAction:c,_id:j,fetchData:$,userdata:M})]})};var P=t(14034),H=t(78510),k=t(67682),D=t(42145),W=t(80899);const N=e=>{const{onClose:l,isOpen:t,setAction:o}=e,[r,d]=(0,s.useState)(!1),c=W.Ik({roleName:W.Yj().required("Role Name is required"),description:W.Yj().required("Description is required")}),u=(0,j.Wx)({initialValues:{roleName:"",description:""},validationSchema:c,onSubmit:(e,l)=>{let{resetForm:t}=l;A(),t()}}),{errors:x,touched:h,values:m,handleBlur:g,handleChange:f,handleSubmit:y,setFieldValue:C,resetForm:T}=u,A=async()=>{try{d(!0);let t=await(0,a.d_)("api/role-access/add",m);var e;if(t&&200===t.status)l(!1),o((e=>!e));else D.oR.error(null===(e=t.response.data)||void 0===e?void 0:e.message)}catch(t){console.log(t)}finally{d(!1)}};return(0,S.jsxs)(v.aF,{isOpen:t,isCentered:!0,children:[(0,S.jsx)(v.mH,{}),(0,S.jsxs)(v.$m,{children:[(0,S.jsxs)(v.rQ,{justifyContent:"space-between",display:"flex",children:["Add Role",(0,S.jsx)(n.IconButton,{onClick:()=>l(!1),icon:(0,S.jsx)(P.CloseIcon,{})})]}),(0,S.jsx)(v.cw,{children:(0,S.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Role Name",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(k.Input,{fontSize:"sm",onChange:f,onBlur:g,value:m.roleName,name:"roleName",placeholder:"Enter Role Name",fontWeight:"500",borderColor:x.roleName&&h.roleName?"red.300":null}),(0,S.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",x.roleName&&h.roleName&&x.roleName]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Description",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(k.Input,{fontSize:"sm",onChange:f,onBlur:g,value:m.description,name:"description",placeholder:"Enter Description",fontWeight:"500",borderColor:x.description&&h.description?"red.300":null}),(0,S.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",x.description&&h.description&&x.description]})]})]})}),(0,S.jsxs)(v.jl,{children:[(0,S.jsx)(n.Button,{size:"sm",variant:"brand",mr:1,disabled:!!r,onClick:y,children:r?(0,S.jsx)(p.A,{}):"Save"}),(0,S.jsx)(n.Button,{size:"sm",variant:"outline",color:"red",colorScheme:"red",onClick:()=>{u.resetForm(),l(!1)},children:"Close"})]})]})]})},O=()=>{const{isOpen:e,onOpen:l,onClose:t}=(0,o.j1)(),[u,x]=(0,s.useState)(!1),[v,h]=(0,s.useState)([]),[p,m]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[f,y]=(0,s.useState)([]),[C,T]=(0,s.useState)(!1),[A,b]=(0,s.useState)(""),[w,P]=(0,s.useState)([]),H=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"Role Name",accessor:"roleName",cell:e=>(0,S.jsx)(i.Text,{me:"10px",onClick:()=>{var l,t,o,i;x(!0),b(null===e||void 0===e?void 0:e.value),m(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(t=l.original)||void 0===t?void 0:t._id),h(null===e||void 0===e||null===(o=e.row)||void 0===o||null===(i=o.original)||void 0===i?void 0:i.access)},color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline",cursor:"pointer"}},fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})},{Header:"Description",accessor:"description"}],k=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"title",accessor:"title"},{Header:"create",accessor:"create",width:"20px"},{Header:"view",accessor:"view",width:"20px"},{Header:"update",accessor:"update",width:"20px"},{Header:"delete",accessor:"delete",width:"20px"}],[D,W]=(0,s.useState)(!1),[O,F]=(0,s.useState)(!1),[I,B]=(0,s.useState)([]),M=(0,c.Zp)(),R=async()=>{F(!0);let e=await(0,a.x4)("api/role-access");B(e.data),F(!1)};return(0,s.useEffect)((()=>{R()}),[D]),(0,S.jsxs)("div",{children:[(0,S.jsx)(r.A,{title:"Roles",isLoding:O,columnData:null!==H&&void 0!==H?H:[],allData:I||[],tableData:I,AdvanceSearch:!1,tableCustomFields:[],searchedDataOut:w,searchDisplay:C,setSearchDisplay:T,setSearchedDataOut:P,searchboxOutside:g,BackButton:(0,S.jsx)(n.Button,{onClick:()=>M("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,S.jsx)(d.m6W,{}),ml:2,children:"Back"}),deleteMany:!0,access:!0,checkBox:!1,getTagValuesOutSide:f,setGetTagValuesOutside:y,ManageGrid:!1,onOpen:l,customSearch:!0}),(0,S.jsx)(N,{isOpen:e,size:"sm",setAction:W,onClose:t}),v&&(0,S.jsx)(z,{isOpen:u,setRoleModal:x,onOpen:l,isLoding:O,columnsData:null!==k&&void 0!==k?k:[],name:A,_id:p,tableData:null!==v&&void 0!==v?v:[],setAccess:h,fetchData:R,setAction:W})]})}}}]);
//# sourceMappingURL=7083.e8464507.chunk.js.map