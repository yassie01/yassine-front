"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[5563],{15563:(e,l,i)=>{i.r(l),i.d(l,{default:()=>W});var n=i(14034),t=i(31206),o=i(19754),d=i(4450),a=i(78858),s=i(85376),r=i(22554),c=i(20962),u=i(10216),v=i(63994),m=i(19488),h=i(62770),x=i(65043),j=i(34960),p=i(73216),g=i(35475),f=i(42145),C=i(66305),y=(i(14406),i(6)),S=i(47936),b=i(9250),A=i(24799),D=i(48878),w=i(95574),I=i(52853),k=i(99702),z=i(98618),B=i(48177),O=i(88031),E=i(86178),N=i.n(E),T=i(1887),F=i(97508),H=i(87892),_=i(85369),G=i(90074),L=i.n(G),M=i(70579);const W=()=>{var e,l,i,E,G,W,R,V,P,U,Y,J,K,Q,Z,$,q,X,ee,le,ie;const ne=(0,p.g)(),te=JSON.parse(localStorage.getItem("user")),oe=(0,t.dU)("gray.500","white"),[de,ae]=(0,x.useState)(),[se,re]=(0,x.useState)([]),{isOpen:ce,onOpen:ue,onClose:ve}=(0,o.j1)(),[me,he]=(0,x.useState)(!1),[xe,je]=(0,x.useState)(!1),[pe,ge]=(0,x.useState)(!1),[fe,Ce]=(0,x.useState)(!1),[ye,Se]=(0,x.useState)(!1),[be,Ae]=(0,x.useState)(!1),[De,we]=(0,x.useState)(!1),[Ie,ke]=(0,x.useState)(!1),[ze,Be]=(0,x.useState)(!1),[Oe,Ee]=(0,x.useState)(!1),[Ne,Te]=(0,x.useState)(0),[Fe,He]=(0,x.useState)(!1),_e=(0,p.Zp)(),Ge=(0,F.wA)(),[Le,Me]=(0,x.useState)(!1),[We,Re]=(0,x.useState)(!1),Ve=(0,F.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.leadCustomFiled)||void 0===l?void 0:l.data.data})),[Pe,Ue,Ye,Je,Ke,Qe,Ze]=(0,w.h)(["Leads","Tasks","Meetings","Calls","Emails","Tasks","Meetings"]),$e=[{Header:"sender",accessor:"senderName"},{Header:"recipient",accessor:"createByName",cell:e=>{var l,i;return(0,M.jsx)(g.N_,{to:"/Email/".concat(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(i=l.original)||void 0===i?void 0:i._id),children:(0,M.jsx)(d.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||" - "})})}},{Header:"time stamp",accessor:"timestamp",cell:e=>(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{color:oe,fontSize:"sm",fontWeight:"700",children:N()(null===e||void 0===e?void 0:e.value).fromNow()})})},{Header:"Created",accessor:"createBy",cell:e=>{var l;return(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{color:oe,fontSize:"sm",fontWeight:"700",children:N()(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.values.timestamp).format("h:mma (DD/MM)")})})}}],qe=[{Header:"sender",accessor:"senderName"},{Header:"recipient",accessor:"createByName",cell:e=>{var l,i;return(0,M.jsx)(g.N_,{to:"/phone-call/".concat(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(i=l.original)||void 0===i?void 0:i._id),children:(0,M.jsx)(d.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||" - "})})}},{Header:"time stamp",accessor:"timestamp",cell:e=>(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{color:oe,fontSize:"sm",fontWeight:"700",children:N()(null===e||void 0===e?void 0:e.value).fromNow()})})},{Header:"Created",accessor:"createBy",cell:e=>{var l;return(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{color:oe,fontSize:"sm",fontWeight:"700",children:N()(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.values.timestamp).format("h:mma (DD/MM)")})})}}],Xe=[{Header:"Agenda",accessor:"agenda",cell:e=>{var l,i;return(0,M.jsx)(g.N_,{to:"/metting/".concat(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(i=l.original)||void 0===i?void 0:i._id),children:(0,M.jsx)(d.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||" - "})})}},{Header:"date Time",accessor:"dateTime"},{Header:"times tamp",accessor:"timestamp",cell:e=>(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{color:oe,fontSize:"sm",fontWeight:"700",children:N()(null===e||void 0===e?void 0:e.value).fromNow()})})},{Header:"create By",accessor:"createdByName"}],el=[{Header:"Title",accessor:"title",type:"text",formikType:"",cell:e=>(0,M.jsx)("div",{className:"selectOpt",children:(0,M.jsx)(d.Text,{onClick:()=>{var l;return _e("/view/".concat(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.original._id))},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})},{Header:"Category",accessor:"category"},{Header:"Assign To",accessor:"assignToName"},{Header:"Start Date",accessor:"start"},{Header:"End Date",accessor:"end"}],ll=async e=>{if(e){let l=await(0,C.x4)("api/document/download/",e);l&&200===l.status?(window.open("".concat(h.d.baseUrl,"api/document/download/").concat(e)),f.oR.success("file Download successful")):l&&404===l.response.status&&f.oR.error("file Not Found")}},il=async e=>{var l;ge(!0);let i=await(0,C.x4)("api/lead/view/",ne.id);ae(null===(l=i.data)||void 0===l?void 0:l.lead),re(i.data),ge(!1),Te(e)};(0,x.useEffect)((()=>{il(),Ge((0,H.y)())}),[Oe]);const nl=null===Object||void 0===Object?void 0:Object.values(ne)[0],tl=null===nl||void 0===nl?void 0:nl.split("/");return(0,M.jsxs)(M.Fragment,{children:[pe?(0,M.jsx)(d.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,M.jsx)(m.A,{})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(d.Heading,{size:"lg",mt:0,m:3,children:(null===de||void 0===de?void 0:de.leadName)||""}),(0,M.jsxs)(a.tU,{onChange:e=>{Te(e)},index:Ne,children:[(0,M.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:1,children:[(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},children:(0,M.jsxs)(a.wb,{sx:{border:"none","& button:focus":{boxShadow:"none"},"& button":{margin:{sm:"0 3px",md:"0 5px"},padding:{sm:"5px",md:"8px"},border:"2px solid #8080803d",borderTopLeftRadius:"10px",borderTopRightRadius:"10px",borderBottom:0,fontSize:{sm:"12px",md:"16px"}},'& button[aria-selected="true"]':{border:"2px solid brand.200",borderBottom:0,zIndex:"0"}},children:[(0,M.jsx)(a.oz,{children:"Information"}),((null===Ke||void 0===Ke?void 0:Ke.view)||(null===Je||void 0===Je?void 0:Je.view)||(null===Qe||void 0===Qe?void 0:Qe.view)||(null===Ze||void 0===Ze?void 0:Ze.view))&&(0,M.jsx)(a.oz,{children:" Communication"}),(0,M.jsx)(a.oz,{children:"Document"})]})}),(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},mt:{sm:"3px",md:"5px"},children:(0,M.jsxs)(d.Flex,{justifyContent:"right",children:[(0,M.jsxs)(s.W1,{children:[("superAdmin"===te.role||(null===Pe||void 0===Pe?void 0:Pe.create)||(null===Pe||void 0===Pe?void 0:Pe.update)||(null===Pe||void 0===Pe?void 0:Pe.delete))&&(0,M.jsx)(s.IU,{size:"sm",variant:"outline",colorScheme:"blackAlpha",mr:2.5,as:r.Button,rightIcon:(0,M.jsx)(n.ChevronDownIcon,{}),children:"Actions"}),(0,M.jsx)(s.Nj,{}),(0,M.jsxs)(s.cO,{minWidth:2,children:[("superAdmin"===te.role||(null===Pe||void 0===Pe?void 0:Pe.create))&&(0,M.jsx)(s.Dr,{color:"blue",onClick:()=>ue(),alignItems:"start",icon:(0,M.jsx)(n.AddIcon,{}),children:"Add"}),("superAdmin"===te.role||(null===Pe||void 0===Pe?void 0:Pe.update))&&(0,M.jsx)(s.Dr,{onClick:()=>he(!0),alignItems:"start",icon:(0,M.jsx)(n.EditIcon,{}),children:"Edit"}),(0,M.jsx)(s.Dr,{onClick:()=>{const e=document.getElementById("reports");e?(e.style.display="block",e.style.width="100%",e.style.height="auto",L()().from(e).set({margin:[0,0,0,0],filename:"Lead_Details_".concat(N()().format("DD-MM-YYYY"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{e.style.display=""}))):console.error("Element with ID 'reports' not found.")},alignItems:"start",icon:(0,M.jsx)(_.kl1,{}),display:"flex",style:{alignItems:"center"},children:"Print as PDF"}),("superAdmin"===te.role||(null===Pe||void 0===Pe?void 0:Pe.delete))&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(s.Nj,{}),(0,M.jsx)(s.Dr,{alignItems:"start",color:"red",onClick:()=>je(!0),icon:(0,M.jsx)(n.DeleteIcon,{}),children:"Delete"})]})]})]}),(0,M.jsx)(g.N_,{to:"/lead",children:(0,M.jsx)(r.Button,{leftIcon:(0,M.jsx)(j.m6W,{}),size:"sm",variant:"brand",children:"Back"})})]})})]}),(0,M.jsxs)(a.T2,{children:[(0,M.jsx)(a.Kp,{pt:4,p:0,children:(0,M.jsx)(k.A,{data:null===Ve||void 0===Ve?void 0:Ve[0],fieldData:de,toCamelCase:function(e){return null===e||void 0===e?void 0:e.replace(/([a-z])([A-Z])/g,"$1 $2")},moduleId:null===Ve||void 0===Ve||null===(e=Ve[0])||void 0===e?void 0:e._id,fetchData:il,id:"reports"})}),(0,M.jsx)(a.Kp,{pt:4,p:0,children:(0,M.jsx)(d.GridItem,{colSpan:{base:4},children:(0,M.jsx)(d.Grid,{overflow:"hidden",templateColumns:{base:"1fr"},gap:4,children:(0,M.jsxs)(d.Grid,{templateColumns:"repeat(12, 1fr)",gap:4,children:[(null===Ke||void 0===Ke?void 0:Ke.view)&&(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},children:(0,M.jsxs)(u.A,{children:[(0,M.jsx)(O.A,{title:"Email",isLoding:pe,columnData:null!==$e&&void 0!==$e?$e:[],allData:ye?se.Email:(null===se||void 0===se||null===(l=se.Email)||void 0===l?void 0:l.length)>0?[se.Email[0]]:[],tableData:ye?se.Email:(null===se||void 0===se||null===(i=se.Email)||void 0===i?void 0:i.length)>0?[se.Email[0]]:[],AdvanceSearch:!1,dataLength:null===se||void 0===se||null===(E=se.Email)||void 0===E?void 0:E.length,tableCustomFields:[],checkBox:!1,deleteMany:!0,ManageGrid:!1,onOpen:()=>Me(!0),access:Ke}),(null===se||void 0===se||null===(G=se.Email)||void 0===G?void 0:G.length)>1&&(0,M.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,M.jsx)(r.Button,{size:"sm",colorScheme:"brand",variant:"outline",display:"flex",justifyContant:"end",onClick:()=>Se(!ye),children:ye?"Show less":"Show more"})})]})}),(null===Je||void 0===Je?void 0:Je.view)&&(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},children:(0,M.jsxs)(u.A,{children:[(0,M.jsx)(O.A,{title:"Call",isLoding:pe,columnData:null!==qe&&void 0!==qe?qe:[],allData:be?null===se||void 0===se?void 0:se.phoneCall:(null===se||void 0===se||null===(W=se.phoneCall)||void 0===W?void 0:W.length)>0?[null===se||void 0===se?void 0:se.phoneCall[0]]:[],tableData:be?null===se||void 0===se?void 0:se.phoneCall:(null===se||void 0===se||null===(R=se.phoneCall)||void 0===R?void 0:R.length)>0?[null===se||void 0===se?void 0:se.phoneCall[0]]:[],AdvanceSearch:!1,dataLength:null===se||void 0===se||null===(V=se.phoneCall)||void 0===V?void 0:V.length,tableCustomFields:[],checkBox:!1,deleteMany:!0,ManageGrid:!1,onOpen:()=>Re(!0),access:Je}),(null===se||void 0===se||null===(P=se.phoneCall)||void 0===P?void 0:P.length)>1&&(0,M.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,M.jsx)(r.Button,{size:"sm",colorScheme:"brand",variant:"outline",display:"flex",justifyContant:"end",onClick:()=>Ae(!be),children:be?"Show less":"Show more"})})]})}),(null===Qe||void 0===Qe?void 0:Qe.view)&&(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},children:(0,M.jsxs)(u.A,{children:[(0,M.jsx)(O.A,{title:"Task",isLoding:pe,columnData:null!==el&&void 0!==el?el:[],allData:De?null===se||void 0===se?void 0:se.task:(null===se||void 0===se||null===(U=se.task)||void 0===U?void 0:U.length)>0?[null===se||void 0===se?void 0:se.task[0]]:[],tableData:De?null===se||void 0===se?void 0:se.task:(null===se||void 0===se||null===(Y=se.task)||void 0===Y?void 0:Y.length)>0?[null===se||void 0===se?void 0:se.task[0]]:[],dataLength:null===se||void 0===se||null===(J=se.task)||void 0===J?void 0:J.length,AdvanceSearch:!1,tableCustomFields:[],checkBox:!1,deleteMany:!0,ManageGrid:!1,onOpen:()=>He(!0),access:Qe}),(null===se||void 0===se||null===(K=se.task)||void 0===K?void 0:K.length)>1&&(0,M.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,M.jsx)(r.Button,{size:"sm",colorScheme:"brand",variant:"outline",display:"flex",justifyContant:"end",onClick:()=>we(!De),children:De?"Show less":"Show more"})})]})}),(null===Ze||void 0===Ze?void 0:Ze.view)&&(0,M.jsx)(d.GridItem,{colSpan:{base:12,md:6},children:(0,M.jsxs)(u.A,{overflow:"scroll",children:[(0,M.jsx)(O.A,{title:"Meeting",isLoding:pe,columnData:null!==Xe&&void 0!==Xe?Xe:[],allData:Ie?null===se||void 0===se?void 0:se.meeting:(null===se||void 0===se||null===(Q=se.meeting)||void 0===Q?void 0:Q.length)>0?[null===se||void 0===se?void 0:se.meeting[0]]:[],tableData:Ie?null===se||void 0===se?void 0:se.meeting:(null===se||void 0===se||null===(Z=se.meeting)||void 0===Z?void 0:Z.length)>0?[null===se||void 0===se?void 0:se.meeting[0]]:[],AdvanceSearch:!1,dataLength:null===se||void 0===se||null===($=se.meeting)||void 0===$?void 0:$.length,tableCustomFields:[],checkBox:!1,deleteMany:!0,ManageGrid:!1,onOpen:()=>Ce(!0),access:Ze}),(null===se||void 0===se||null===(q=se.meeting)||void 0===q?void 0:q.length)>1&&(0,M.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,M.jsx)(r.Button,{colorScheme:"brand",size:"sm",variant:"outline",display:"flex",justifyContant:"end",onClick:()=>ke(!Ie),children:Ie?"Show less":"Show more"})})]})})]})})})}),(0,M.jsx)(a.Kp,{pt:4,p:0,children:(0,M.jsx)(d.GridItem,{colSpan:{base:4},children:(0,M.jsxs)(u.A,{minH:"50vh",children:[(0,M.jsxs)(d.Flex,{alignItems:"center",justifyContent:"space-between",mb:"2",children:[(0,M.jsx)(d.Heading,{size:"md",mb:3,children:"Documents"}),(0,M.jsx)(r.Button,{leftIcon:(0,M.jsx)(n.AddIcon,{}),size:"sm",variant:"brand",onClick:()=>Be(!0),children:"Add Document"})]}),(0,M.jsx)(v.E,{}),(0,M.jsx)(d.VStack,{mt:4,alignItems:"flex-start",children:(null===se||void 0===se||null===(X=se.Document)||void 0===X?void 0:X.length)>0?null===se||void 0===se||null===(ee=se.Document)||void 0===ee?void 0:ee.map((e=>{var l;return(0,M.jsx)(c.A,{name:e.folderName,item:e,children:null===e||void 0===e||null===(l=e.files)||void 0===l?void 0:l.map((e=>(0,M.jsx)(c.A,{download:ll,data:e,name:e.fileName,isFile:!0,from:"lead"})))})})):(0,M.jsx)(d.Text,{textAlign:"center",width:"100%",color:oe,fontSize:"sm",fontWeight:"700",children:(0,M.jsx)(I.A,{})})})]})})})]})]}),("superAdmin"===te.role||(null===Pe||void 0===Pe?void 0:Pe.update)||(null===Pe||void 0===Pe?void 0:Pe.delete))&&(0,M.jsx)(u.A,{mt:3,children:(0,M.jsx)(d.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,M.jsx)(d.GridItem,{colStart:6,children:(0,M.jsxs)(d.Flex,{justifyContent:"right",children:["superAdmin"===te.role||null!==Pe&&void 0!==Pe&&Pe.update?(0,M.jsx)(r.Button,{size:"sm",onClick:()=>he(!0),leftIcon:(0,M.jsx)(n.EditIcon,{}),mr:2.5,variant:"outline",colorScheme:"green",children:"Edit"}):"","superAdmin"===te.role||null!==Pe&&void 0!==Pe&&Pe.delete?(0,M.jsx)(r.Button,{size:"sm",style:{background:"red.800"},onClick:()=>je(!0),leftIcon:(0,M.jsx)(n.DeleteIcon,{}),colorScheme:"red",children:"Delete"}):""]})})})})]}),ce&&(0,M.jsx)(A.A,{isOpen:ce,size:"lg",onClose:ve,leadData:null===Ve||void 0===Ve?void 0:Ve[0],setAction:Ee}),(0,M.jsx)(D.A,{isOpen:me,size:"lg",onClose:he,leadData:null===Ve||void 0===Ve?void 0:Ve[0],setAction:Ee,moduleId:null===Ve||void 0===Ve||null===(le=Ve[0])||void 0===le?void 0:le._id,data:de}),(0,M.jsx)(S.A,{fetchData:il,isOpen:fe,leadContect:null===tl||void 0===tl?void 0:tl[0],onClose:Ce,from:"contact",id:ne.id,setAction:Ee,view:!0}),(0,M.jsx)(T.A,{isOpen:Fe,fetchData:il,leadContect:null===tl||void 0===tl?void 0:tl[0],onClose:He,id:ne.id,userAction:"add",view:!0}),(0,M.jsx)(b.A,{viewData:se,fetchData:il,isOpen:We,onClose:Re,setAction:Ee,data:null===de||void 0===de?void 0:de.contact,id:ne.id,lead:!0,LData:de}),(0,M.jsx)(y.A,{lead:!0,leadEmail:null===se||void 0===se||null===(ie=se.lead)||void 0===ie?void 0:ie.leadEmail,fetchData:il,isOpen:Le,onClose:Me,id:ne.id}),(0,M.jsx)(z.A,{addDocument:ze,setAddDocument:Be,linkId:ne.id,from:"lead",setAction:Ee,fetchData:il}),(0,M.jsx)(B.A,{isOpen:xe,onClose:()=>je(!1),type:"Lead",handleDeleteData:async e=>{try{ge(!0),200===(await(0,C.Gx)("api/lead/delete/",e)).status&&(je(!1),Ee((e=>!e)),_e("/lead"))}catch(l){console.log(l)}finally{ge(!1)}},ids:ne.id})]})}},24799:(e,l,i)=>{i.d(l,{A:()=>x});var n=i(89379),t=i(14034),o=i(40848),d=i(22554),a=i(19488),s=i(63516),r=i(65043),c=i(66305),u=i(22030),v=i(48908),m=i(80899),h=i(70579);const x=e=>{var l,i;const[x,j]=(0,r.useState)(!1),p=Object.fromEntries(((null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),g=(0,n.A)((0,n.A)({},p),{},{createBy:JSON.parse(localStorage.getItem("user"))._id}),f=(0,s.Wx)({initialValues:g,validationSchema:m.Ik().shape((0,u.g)(null===e||void 0===e||null===(i=e.leadData)||void 0===i?void 0:i.fields)),onSubmit:(e,l)=>{let{resetForm:i}=l;I()}}),{errors:C,touched:y,values:S,handleBlur:b,handleChange:A,handleSubmit:D,setFieldValue:w}=f,I=async()=>{try{var l;j(!0),200===(await(0,c.d_)("api/form/add",(0,n.A)((0,n.A)({},S),{},{moduleId:null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l._id}))).status&&(e.onClose(),f.resetForm(),e.setAction((e=>!e)))}catch(i){console.log(i)}finally{j(!1)}};return(0,h.jsx)("div",{children:(0,h.jsxs)(o._s,{isOpen:e.isOpen,size:e.size,children:[(0,h.jsx)(o.QP,{}),(0,h.jsxs)(o.zj,{children:[(0,h.jsxs)(o.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Add Lead",(0,h.jsx)(d.IconButton,{onClick:e.onClose,icon:(0,h.jsx)(t.CloseIcon,{})})]}),(0,h.jsx)(o.ys,{children:(0,h.jsx)(v.A,{moduleData:e.leadData,values:S,setFieldValue:w,handleChange:A,handleBlur:b,errors:C,touched:y})}),(0,h.jsxs)(o.tb,{children:[(0,h.jsx)(d.Button,{sx:{textTransform:"capitalize"},size:"sm",disabled:!!x,variant:"brand",type:"submit",onClick:D,children:x?(0,h.jsx)(a.A,{}):"Save"}),(0,h.jsx)(d.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>{f.resetForm(),e.onClose()},children:"Close"})]})]})]})})}},48878:(e,l,i)=>{i.d(l,{A:()=>p});var n=i(89379),t=i(14034),o=i(40848),d=i(22554),a=i(4450),s=i(19488),r=i(63516),c=i(65043),u=i(73216),v=i(66305),m=i(22030),h=i(48908),x=i(80899),j=i(70579);const p=e=>{var l,i;const{data:p}=e,[g,f]=(0,c.useState)(!1),C=Object.fromEntries(((null===e||void 0===e||null===(l=e.leadData)||void 0===l?void 0:l.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),[y,S]=(0,c.useState)((0,n.A)((0,n.A)({},C),{},{createBy:JSON.parse(localStorage.getItem("user"))._id})),b=(0,u.g)(),A=(0,r.Wx)({initialValues:y,enableReinitialize:!0,validationSchema:x.Ik().shape((0,m.g)(null===e||void 0===e||null===(i=e.leadData)||void 0===i?void 0:i.fields)),onSubmit:(e,l)=>{let{resetForm:i}=l;E()}}),{errors:D,touched:w,values:I,handleBlur:k,handleChange:z,handleSubmit:B,setFieldValue:O}=A,E=async()=>{try{f(!0),200===(await(0,v.yP)("api/form/edit/".concat((null===e||void 0===e?void 0:e.selectedId)||b.id),(0,n.A)((0,n.A)({},I),{},{moduleId:e.moduleId}))).status&&(e.onClose(),e.setAction((e=>!e)))}catch(l){console.log(l)}finally{f(!1)}},N=()=>{e.onClose(!1),e.setSelectedId&&(null===e||void 0===e||e.setSelectedId()),A.resetForm()};let T;return(0,c.useEffect)((()=>{(async()=>{if(p)S((e=>(0,n.A)((0,n.A)({},e),p)));else if(null!==e&&void 0!==e&&e.selectedId)try{var l,i;f(!0),T=await(0,v.x4)("api/lead/view/",null===e||void 0===e?void 0:e.selectedId);let t=null===(l=T)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.lead;S((e=>(0,n.A)((0,n.A)({},e),t)))}catch(t){console.error(t)}finally{f(!1)}})()}),[null===e||void 0===e?void 0:e.selectedId,p]),(0,j.jsx)("div",{children:(0,j.jsxs)(o._s,{isOpen:e.isOpen,size:e.size,children:[(0,j.jsx)(o.QP,{}),(0,j.jsxs)(o.zj,{children:[(0,j.jsxs)(o.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Edit Lead",(0,j.jsx)(d.IconButton,{onClick:N,icon:(0,j.jsx)(t.CloseIcon,{})})]}),(0,j.jsx)(o.ys,{children:g?(0,j.jsx)(a.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,j.jsx)(s.A,{})}):(0,j.jsx)(h.A,{moduleData:e.leadData,values:I,setFieldValue:O,handleChange:z,handleBlur:k,errors:D,touched:w})}),(0,j.jsxs)(o.tb,{children:[(0,j.jsx)(d.Button,{sx:{textTransform:"capitalize"},variant:"brand",size:"sm",type:"submit",disabled:!!g,onClick:B,children:g?(0,j.jsx)(s.A,{}):"Update"}),(0,j.jsx)(d.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:N,children:"Close"})]})]})]})})}}}]);
//# sourceMappingURL=5563.b9cb7b11.chunk.js.map