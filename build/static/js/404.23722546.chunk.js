(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[404],{6:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(40848),l=n(4450),a=n(78510),s=n(67682),r=n(95104),o=n(53186),d=n(84626),c=n(22554),u=n(19488),h=n(60446),v=n.n(h),m=n(63516),f=n(65043),x=n(97508),p=n(42145),j=n(89849),S=n(66305),g=n(42101),y=n(70579);const b=e=>{const{onClose:t,isOpen:n,fetchData:h,setAction:b}=e,D=JSON.parse(localStorage.getItem("user")),[C,$]=(0,f.useState)(!1),w=(new Date).toISOString().split(".")[0],[z,I]=(0,f.useState)([]),A=(0,x.wA)(),O={sender:null===D||void 0===D?void 0:D._id,recipient:!0!==e.lead?null===e||void 0===e?void 0:e.contactEmail:null===e||void 0===e?void 0:e.leadEmail,subject:"",message:"",createByContact:null!==e&&void 0!==e&&e.id&&!0!==(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",createByLead:null!==e&&void 0!==e&&e.id&&!0===(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",startDate:"",type:"message",html:"",createBy:null===D||void 0===D?void 0:D._id},F=(0,m.Wx)({initialValues:O,validationSchema:j.y4,enableReinitialize:!0,onSubmit:(e,t)=>{let{resetForm:n}=t;N(),n()}}),{errors:M,touched:T,values:_,handleBlur:B,handleChange:k,handleSubmit:W,setFieldValue:L}=F,N=async()=>{try{$(!0),200===(await(0,S.d_)("api/email/add",_)).status&&(e.onClose(),h(1))}catch(t){console.log(t)}finally{$(!1)}};return(0,f.useEffect)((()=>{"template"===(null===_||void 0===_?void 0:_.type)&&(async()=>{$(!0);const e=await A((0,g.t)());var t;200===e.payload.status?I(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data):p.oR.error("Failed to fetch data","error"),$(!1)})()}),[null===_||void 0===_?void 0:_.type]),(0,y.jsxs)(i.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,y.jsx)(i.mH,{}),(0,y.jsxs)(i.$m,{children:[(0,y.jsx)(i.rQ,{children:"Send Email "}),(0,y.jsx)(i.s_,{}),(0,y.jsx)(i.cw,{children:(0,y.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,y.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,y.jsx)(l.Text,{color:"red",children:"*"})]}),(0,y.jsx)(s.Input,{fontSize:"sm",onChange:k,onBlur:B,value:_.recipient,name:"recipient",disabled:!0,placeholder:"Recipient",fontWeight:"500",borderColor:M.recipient&&T.recipient?"red.300":null}),(0,y.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",M.recipient&&T.recipient&&M.recipient]})]}),(0,y.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,y.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,y.jsx)(l.Text,{color:"red",children:"*"})]}),(0,y.jsx)(s.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:k,onBlur:B,value:_.subject,name:"subject",fontWeight:"500",borderColor:M.subject&&T.subject?"red.300":null}),(0,y.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",M.subject&&T.subject&&M.subject]})]}),(0,y.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,y.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,y.jsx)(l.Text,{color:"red",children:"*"})]}),(0,y.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:k,onBlur:B,min:v()(w).format("YYYY-MM-DD HH:mm"),value:_.startDate,name:"startDate",fontWeight:"500",borderColor:null!==M&&void 0!==M&&M.startDate&&null!==T&&void 0!==T&&T.startDate?"red.300":null}),(0,y.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",M.startDate&&T.startDate&&M.startDate]})]}),(0,y.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,y.jsx)(r.z6,{onChange:e=>{L("type",e)},value:_.type,children:(0,y.jsxs)(l.Stack,{direction:"row",children:[(0,y.jsx)(r.sx,{value:"message",children:"Message"}),(0,y.jsx)(r.sx,{value:"template",children:"Template"})]})})]}),(0,y.jsx)(l.GridItem,{colSpan:{base:12},children:"message"===(null===_||void 0===_?void 0:_.type)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:k,onBlur:B,value:_.message,name:"message",fontWeight:"500",borderColor:M.message&&T.message?"red.300":null}),(0,y.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",M.message&&T.message&&M.message]})]}):(0,y.jsx)(d.l6,{name:"html",onChange:k,onBlur:B,value:_.html,fontWeight:"500",placeholder:"Select Template",children:null===z||void 0===z?void 0:z.map((e=>(0,y.jsx)("option",{value:null===e||void 0===e?void 0:e.html,children:null===e||void 0===e?void 0:e.templateName},e._id)))})})]})}),(0,y.jsxs)(i.jl,{children:[(0,y.jsx)(c.Button,{size:"sm",variant:"brand",onClick:W,disabled:!!C,children:C?(0,y.jsx)(u.A,{}):"Save"}),(0,y.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{F.resetForm(),t()},children:"Close"})]})]})]})}},9250:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(40848),l=n(4450),a=n(78510),s=n(67682),r=n(53186),o=n(22554),d=n(19488),c=n(60446),u=n.n(c),h=n(63516),v=n(65043),m=n(89849),f=n(66305),x=n(70579);const p=e=>{const{onClose:t,isOpen:n,fetchData:c,setAction:p,cData:j,LData:S}=e,[g,y]=(0,v.useState)(!1),b=(new Date).toISOString().split(".")[0],D=JSON.parse(localStorage.getItem("user")),C={sender:null===D||void 0===D?void 0:D._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:"",createBy:null===D||void 0===D?void 0:D._id},$=(0,h.Wx)({initialValues:C,validationSchema:m.Ar,onSubmit:(e,t)=>{let{resetForm:n}=t;T(),n()}}),{errors:w,touched:z,values:I,handleBlur:A,handleChange:O,handleSubmit:F,setFieldValue:M}=$,T=async()=>{try{y(!0),200===(await(0,f.d_)("api/phoneCall/add",I)).status&&(e.onClose(),c(1))}catch(t){console.log(t)}finally{y(!1)}};return(0,v.useEffect)((()=>{(async()=>{S&&S._id&&!0===e.lead?(M("recipient",S.leadPhoneNumber),M("createByLead",null===e||void 0===e?void 0:e.id),I.recipient=S.leadPhoneNumber):j&&j._id&&!0!==e.lead&&(M("recipient",null===j||void 0===j?void 0:j.phoneNumber),M("createByContact",null===e||void 0===e?void 0:e.id),I.recipient=null===j||void 0===j?void 0:j.phoneNumber)})()}),[e.id,j,S]),(0,x.jsxs)(i.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,x.jsx)(i.mH,{}),(0,x.jsxs)(i.$m,{children:[(0,x.jsx)(i.rQ,{children:"Add Call "}),(0,x.jsx)(i.s_,{}),(0,x.jsx)(i.cw,{children:(0,x.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,x.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,x.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,x.jsx)(l.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{fontSize:"sm",type:"number",disabled:!0,onChange:O,onBlur:A,value:I.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:w.recipient&&z.recipient?"red.300":null}),(0,x.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.recipient&&z.recipient&&w.recipient]})]}),(0,x.jsxs)(l.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,x.jsx)(l.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:O,onBlur:A,min:u()(b).format("YYYY-MM-DD HH:mm"),value:I.startDate,name:"startDate",fontWeight:"500",borderColor:null!==w&&void 0!==w&&w.startDate&&null!==z&&void 0!==z&&z.startDate?"red.300":null}),(0,x.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.startDate&&z.startDate&&w.startDate]})]}),(0,x.jsxs)(l.GridItem,{colSpan:{base:12,md:6},children:[(0,x.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,x.jsx)(l.Text,{color:"red",children:"*"})]}),(0,x.jsx)(s.Input,{fontSize:"sm",onChange:O,onBlur:A,value:I.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:w.callDuration&&z.callDuration?"red.300":null}),(0,x.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.callDuration&&z.callDuration&&w.callDuration]})]}),(0,x.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,x.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,x.jsx)(r.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:O,onBlur:A,value:I.callNotes,name:"callNotes",fontWeight:"500",borderColor:w.callNotes&&z.callNotes?"red.300":null}),(0,x.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.callNotes&&z.callNotes&&w.callNotes]})]})]})}),(0,x.jsxs)(i.jl,{children:[(0,x.jsx)(o.Button,{size:"sm",variant:"brand",disabled:!!g,onClick:F,children:g?(0,x.jsx)(d.A,{}):"Save"}),(0,x.jsx)(o.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{$.resetForm(),t()},children:"Close"})]})]})]})}},23848:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(31206),l=n(4450),a=n(3458),s=n(71997),r=n(27149),o=n(70579);function d(e){const{count:t,text:n,onFileSelect:d}=e,c=(0,i.dU)("secondaryGray.900","white"),u=(0,i.dU)("brand.500","white");return(0,o.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,o.jsx)(l.GridItem,{colSpan:{base:12},children:(0,o.jsx)(s.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===n?"img":"",csv:"csv",height:"100%",onFileSelect:d,isMultipleAllow:!1,content:(0,o.jsxs)(l.Box,{children:[(0,o.jsx)(a.In,{as:r.vpy,w:"80px",h:"80px",color:u}),(0,o.jsx)(l.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,o.jsx)(l.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),t>0&&(0,o.jsxs)(l.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",t]})]})})}),(0,o.jsx)(l.GridItem,{colSpan:{base:12},children:(0,o.jsxs)(l.Flex,{direction:"column",children:[(0,o.jsxs)(l.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",n]}),(0,o.jsx)(l.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},24799:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(89379),l=n(14034),a=n(40848),s=n(22554),r=n(19488),o=n(63516),d=n(65043),c=n(66305),u=n(22030),h=n(48908),v=n(80899),m=n(70579);const f=e=>{var t,n;const[f,x]=(0,d.useState)(!1),p=Object.fromEntries(((null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),j=(0,i.A)((0,i.A)({},p),{},{createBy:JSON.parse(localStorage.getItem("user"))._id}),S=(0,o.Wx)({initialValues:j,validationSchema:v.Ik().shape((0,u.g)(null===e||void 0===e||null===(n=e.leadData)||void 0===n?void 0:n.fields)),onSubmit:(e,t)=>{let{resetForm:n}=t;z()}}),{errors:g,touched:y,values:b,handleBlur:D,handleChange:C,handleSubmit:$,setFieldValue:w}=S,z=async()=>{try{var t;x(!0),200===(await(0,c.d_)("api/form/add",(0,i.A)((0,i.A)({},b),{},{moduleId:null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t._id}))).status&&(e.onClose(),S.resetForm(),e.setAction((e=>!e)))}catch(n){console.log(n)}finally{x(!1)}};return(0,m.jsx)("div",{children:(0,m.jsxs)(a._s,{isOpen:e.isOpen,size:e.size,children:[(0,m.jsx)(a.QP,{}),(0,m.jsxs)(a.zj,{children:[(0,m.jsxs)(a.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Add Lead",(0,m.jsx)(s.IconButton,{onClick:e.onClose,icon:(0,m.jsx)(l.CloseIcon,{})})]}),(0,m.jsx)(a.ys,{children:(0,m.jsx)(h.A,{moduleData:e.leadData,values:b,setFieldValue:w,handleChange:C,handleBlur:D,errors:g,touched:y})}),(0,m.jsxs)(a.tb,{children:[(0,m.jsx)(s.Button,{sx:{textTransform:"capitalize"},size:"sm",disabled:!!f,variant:"brand",type:"submit",onClick:$,children:f?(0,m.jsx)(r.A,{}):"Save"}),(0,m.jsx)(s.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>{S.resetForm(),e.onClose()},children:"Close"})]})]})]})})}},25259:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(40848),l=n(4450),a=n(22554),s=n(19488),r=n(63516),o=n(65043),d=n(73216),c=n(23848),u=n(70579);const h=e=>{const{onClose:t,isOpen:n,text:h,customFields:v}=e,[m,f]=(0,o.useState)(!1),x=(0,d.Zp)(),p=(0,r.Wx)({initialValues:{lead:""},onSubmit:(e,t)=>{let{resetForm:n}=t;w(),n()}}),{errors:j,touched:S,values:g,handleBlur:y,handleChange:b,handleSubmit:D,setFieldValue:C,resetForm:$}=p,w=async()=>{try{f(!0),$(),g.lead&&(t(),x("/leadImport",{state:{fileData:g.lead,customFields:v}}))}catch(e){console.log(e)}finally{f(!1)}};return(0,u.jsxs)(i.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,u.jsx)(i.mH,{}),(0,u.jsxs)(i.$m,{children:[(0,u.jsx)(i.rQ,{children:"Import Leads"}),(0,u.jsx)(i.s_,{}),(0,u.jsx)(i.cw,{children:(0,u.jsx)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,u.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,u.jsx)(c.A,{count:g.lead.length,onFileSelect:e=>C("lead",e),text:h}),(0,u.jsxs)(l.Text,{mb:"10px",color:"red",children:[" ",j.lead&&S.lead&&(0,u.jsxs)(u.Fragment,{children:["Please Select ",h]})]})]})})}),(0,u.jsxs)(i.jl,{children:[(0,u.jsx)(a.Button,{variant:"brand",size:"sm",onClick:D,disabled:!!m,children:m?(0,u.jsx)(s.A,{}):"Save"}),(0,u.jsx)(a.Button,{variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},size:"sm",onClick:()=>{t(),p.resetForm()},children:"Close"})]})]})]})}},40404:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var i=n(65043),l=n(73216),a=n(95574),s=n(19754),r=n(4450),o=n(85376),d=n(84626),c=n(14034),u=n(17368),h=n(66305),v=n(88031),m=n(24799),f=n(48878),x=n(6),p=n(9250),j=n(25259),S=n(48177),g=n(43017),y=n(97508),b=n(37801),D=n(87892),C=n(42145),$=n(70579);const w=()=>{var e,t,n,w;const z=JSON.parse(localStorage.getItem("user")),I=(0,l.Zp)(),A=(0,l.zy)(),O=(0,y.wA)(),[F,M,T]=(0,a.h)(["Leads","Emails","Calls"]),[_,B]=(0,i.useState)(!1),[k,W]=(0,i.useState)(!1),[L,N]=(0,i.useState)([]),[H,E]=(0,i.useState)([]),[V,Y]=(0,i.useState)([]),[G,P]=(0,i.useState)([]),[R,U]=(0,i.useState)(!1),{isOpen:J,onOpen:Q,onClose:Z}=(0,s.j1)(),[q,K]=(0,i.useState)([]),[X,ee]=(0,i.useState)(!1),[te,ne]=(0,i.useState)(!1),[ie,le]=(0,i.useState)(!1),[ae,se]=(0,i.useState)(),[re,oe]=(0,i.useState)(!1),[de,ce]=(0,i.useState)(),[ue,he]=(0,i.useState)([]),[ve,me]=(0,i.useState)(!1),[fe,xe]=(0,i.useState)(""),[pe,je]=(0,i.useState)({}),Se=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.data})),ge=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.advanceSearchData)||void 0===t?void 0:t.searchResult})),ye={leadStatus:null===A||void 0===A?void 0:A.state},be=async()=>{B(!0);await(0,h.x4)("superAdmin"===z.role?"api/lead/":"api/lead/?createBy=".concat(z._id));B(!1)},De=e=>{switch(e.original.leadStatus){case"pending":return"pending";case"active":default:return"completed";case"sold":return"onHold"}},Ce=async()=>{B(!0);try{var e,t,n,i,l,a,s,v;const f=await O((0,D.y)());var m;if(200===f.payload.status)K(null===f||void 0===f||null===(m=f.payload)||void 0===m?void 0:m.data);else C.oR.error("Failed to fetch data","error");const x={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:t,i:n}=e;return(0,$.jsx)(r.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,$.jsxs)(o.W1,{isLazy:!0,children:[(0,$.jsx)(o.IU,{children:(0,$.jsx)(u.txp,{})}),(0,$.jsxs)(o.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===F||void 0===F?void 0:F.update)&&(0,$.jsx)(o.Dr,{py:2.5,icon:(0,$.jsx)(c.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;ee(!0),ce(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===T||void 0===T?void 0:T.create)&&(0,$.jsx)(o.Dr,{py:2.5,width:"165px",onClick:()=>{var e;je(null===t||void 0===t?void 0:t.original),le(!0),se(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id)},icon:(0,$.jsx)(c.PhoneIcon,{fontSize:15,mb:1}),children:"Create Call"}),(null===M||void 0===M?void 0:M.create)&&(0,$.jsxs)(o.Dr,{py:2.5,width:"165px",onClick:()=>{var e,n,i,l;i=null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id,l=null===t||void 0===t?void 0:t.original,i&&(xe(null===l||void 0===l?void 0:l.leadEmail),oe(!0)),ce(null===t||void 0===t||null===(n=t.values)||void 0===n?void 0:n._id)},icon:(0,$.jsx)(c.EmailIcon,{fontSize:15,mb:1}),children:["EmailSend"," "]}),(null===F||void 0===F?void 0:F.view)&&(0,$.jsx)(o.Dr,{py:2.5,color:"green",icon:(0,$.jsx)(c.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;I("/leadView/".concat(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id),{state:{leadList:Se}})},children:"View"}),(null===F||void 0===F?void 0:F.delete)&&(0,$.jsx)(o.Dr,{py:2.5,color:"red",icon:(0,$.jsx)(c.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;ne(!0),he([null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},p=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Status",accessor:"leadStatus",isSortable:!0,center:!0,cell:e=>{let{row:t}=e;return(0,$.jsx)("div",{className:"selectOpt",children:(0,$.jsxs)(d.l6,{defaultValue:"active",className:De(t),onChange:e=>(async(e,t)=>{try{B(!0),200===(await(0,h.yP)("api/lead/changeStatus/".concat(e.original._id),{leadStatus:t.target.value})).status&&U((e=>!e))}catch(t){console.log(t)}finally{B(!1)}})(t,e),height:7,width:130,value:t.original.leadStatus,style:{fontSize:"14px"},children:[(0,$.jsx)("option",{value:"active",children:"Active"}),(0,$.jsx)("option",{value:"sold",children:"Sold"}),(0,$.jsx)("option",{value:"pending",children:"Pending"})]})})}},...null!==f&&void 0!==f&&null!==(e=f.payload)&&void 0!==e&&e.data&&f.payload.data.length>0&&(null===(t=f.payload.data[0])||void 0===t||null===(n=t.fields)||void 0===n||null===(i=n.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&(null===e||void 0===e?void 0:e.isView))))||void 0===i?void 0:i.map((e=>"leadStatus"!==(null===e||void 0===e?void 0:e.name)&&{Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name,cell:e=>(0,$.jsx)("div",{className:"selectOpt",children:(0,$.jsx)(r.Text,{onClick:()=>{var t,n;I("/leadView/".concat(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n._id))},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})})))||[],...null!==f&&void 0!==f&&null!==(l=f.payload)&&void 0!==l&&l.data&&f.payload.data.length>0&&(null===(a=f.payload.data[0])||void 0===a||null===(s=a.fields)||void 0===s||null===(v=s.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&!(null!==e&&void 0!==e&&e.isView)&&"leadStatus"!==(null===e||void 0===e?void 0:e.name))))||void 0===v?void 0:v.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name}))))||[],...null!==F&&void 0!==F&&F.update||null!==F&&void 0!==F&&F.view||null!==F&&void 0!==F&&F.delete?[x]:[]];E(p),B(!1)}catch(f){console.error("Error fetching custom data fields:",f),C.oR.error("Failed to fetch data ","error")}};return(0,i.useEffect)((()=>{"/lead"===window.location.pathname&&O((0,b.T)()),Ce()}),[R]),(0,i.useEffect)((()=>{Y(null===L||void 0===L?void 0:L.filter((e=>null===G||void 0===G?void 0:G.find((t=>(null===t||void 0===t?void 0:t.Header)===e.Header)))))}),[L,G]),(0,i.useEffect)((()=>{if(null!==A&&void 0!==A&&A.state){W(!0),O((0,g.DW)({values:ye,allData:Se,type:"Leads"}));const e=[{name:["leadStatus"],value:null===A||void 0===A?void 0:A.state}];O((0,g.Tr)(e.filter((e=>e.value))))}}),[Se,null===A||void 0===A?void 0:A.state]),(0,$.jsxs)("div",{children:[(0,$.jsx)(r.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:4,children:!_&&(0,$.jsx)(r.GridItem,{colSpan:6,children:(0,$.jsx)(v.A,{title:"Leads",isLoding:_,searchDisplay:k,setSearchDisplay:W,columnData:null!==H&&void 0!==H?H:[],allData:null!==Se&&void 0!==Se?Se:[],tableData:k?ge:Se,tableCustomFields:(null===q||void 0===q||null===(e=q[0])||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],access:F,action:R,setAction:U,isOpen:J,onClose:onclose,onOpen:Q,selectedValues:ue,setSelectedValues:he,setDelete:ne,setIsImport:me})})}),J&&(0,$.jsx)(m.A,{isOpen:J,size:"lg",leadData:q[0],onClose:Z,setAction:U,action:R}),X&&(0,$.jsx)(f.A,{isOpen:X,size:"lg",leadData:q[0],selectedId:de,setSelectedId:ce,onClose:ee,setAction:U,moduleId:null===q||void 0===q||null===(n=q[0])||void 0===n?void 0:n._id}),te&&(0,$.jsx)(S.A,{isOpen:te,onClose:()=>ne(!1),type:"Leads",handleDeleteData:async e=>{try{B(!0),200===(await(0,h.Vn)("api/lead/deleteMany",e)).status&&(he([]),ne(!1),U((e=>!e)))}catch(t){console.log(t)}finally{B(!1)}},ids:ue}),re&&(0,$.jsx)(x.A,{fetchData:be,isOpen:re,onClose:oe,lead:!0,id:de,leadEmail:fe}),ie&&(0,$.jsx)(p.A,{fetchData:be,isOpen:ie,onClose:le,lead:!0,id:ae,LData:pe}),ve&&(0,$.jsx)(j.A,{text:"Lead file",isOpen:ve,onClose:me,customFields:(null===q||void 0===q||null===(w=q[0])||void 0===w?void 0:w.fields)||[]})]})}},48878:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(89379),l=n(14034),a=n(40848),s=n(22554),r=n(4450),o=n(19488),d=n(63516),c=n(65043),u=n(73216),h=n(66305),v=n(22030),m=n(48908),f=n(80899),x=n(70579);const p=e=>{var t,n;const{data:p}=e,[j,S]=(0,c.useState)(!1),g=Object.fromEntries(((null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),[y,b]=(0,c.useState)((0,i.A)((0,i.A)({},g),{},{createBy:JSON.parse(localStorage.getItem("user"))._id})),D=(0,u.g)(),C=(0,d.Wx)({initialValues:y,enableReinitialize:!0,validationSchema:f.Ik().shape((0,v.g)(null===e||void 0===e||null===(n=e.leadData)||void 0===n?void 0:n.fields)),onSubmit:(e,t)=>{let{resetForm:n}=t;M()}}),{errors:$,touched:w,values:z,handleBlur:I,handleChange:A,handleSubmit:O,setFieldValue:F}=C,M=async()=>{try{S(!0),200===(await(0,h.yP)("api/form/edit/".concat((null===e||void 0===e?void 0:e.selectedId)||D.id),(0,i.A)((0,i.A)({},z),{},{moduleId:e.moduleId}))).status&&(e.onClose(),e.setAction((e=>!e)))}catch(t){console.log(t)}finally{S(!1)}},T=()=>{e.onClose(!1),e.setSelectedId&&(null===e||void 0===e||e.setSelectedId()),C.resetForm()};let _;return(0,c.useEffect)((()=>{(async()=>{if(p)b((e=>(0,i.A)((0,i.A)({},e),p)));else if(null!==e&&void 0!==e&&e.selectedId)try{var t,n;S(!0),_=await(0,h.x4)("api/lead/view/",null===e||void 0===e?void 0:e.selectedId);let l=null===(t=_)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.lead;b((e=>(0,i.A)((0,i.A)({},e),l)))}catch(l){console.error(l)}finally{S(!1)}})()}),[null===e||void 0===e?void 0:e.selectedId,p]),(0,x.jsx)("div",{children:(0,x.jsxs)(a._s,{isOpen:e.isOpen,size:e.size,children:[(0,x.jsx)(a.QP,{}),(0,x.jsxs)(a.zj,{children:[(0,x.jsxs)(a.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Edit Lead",(0,x.jsx)(s.IconButton,{onClick:T,icon:(0,x.jsx)(l.CloseIcon,{})})]}),(0,x.jsx)(a.ys,{children:j?(0,x.jsx)(r.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,x.jsx)(o.A,{})}):(0,x.jsx)(m.A,{moduleData:e.leadData,values:z,setFieldValue:F,handleChange:A,handleBlur:I,errors:$,touched:w})}),(0,x.jsxs)(a.tb,{children:[(0,x.jsx)(s.Button,{sx:{textTransform:"capitalize"},variant:"brand",size:"sm",type:"submit",disabled:!!j,onClick:O,children:j?(0,x.jsx)(o.A,{}):"Update"}),(0,x.jsx)(s.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:T,children:"Close"})]})]})]})})}},53186:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var i=n(78510),l=n(59522),a=n(23216),s=n(65043);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var o=["className","rows"],d=(0,l.Rf)((function(e,t){var n=(0,l.Vl)("Textarea",e),d=(0,l.MN)(e),c=d.className,u=d.rows,h=function(e,t){if(null==e)return{};var n,i,l={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(d,o),v=(0,i.useFormControl)(h),m=u?(0,a.cJ)(n,["h","minH","height","minHeight"]):n;return s.createElement(l.Bv.textarea,r({ref:t,rows:u},v,{className:(0,a.cx)("chakra-textarea",c),__css:m}))}));a.gt&&(d.displayName="Textarea")},60446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",l="second",a="minute",s="hour",r="day",o="week",d="month",c="quarter",u="year",h="date",v="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},p=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},j={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),l=n%60;return(t<=0?"+":"-")+p(i,2,"0")+":"+p(l,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),l=t.clone().add(i,d),a=n-l<0,s=t.clone().add(i+(a?-1:1),d);return+(-(i+(n-l)/(a?l-s:s-l))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:o,d:r,D:h,h:s,m:a,s:l,ms:i,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},S="en",g={};g[S]=x;var y="$isDayjsObject",b=function(e){return e instanceof w||!(!e||!e[y])},D=function e(t,n,i){var l;if(!t)return S;if("string"==typeof t){var a=t.toLowerCase();g[a]&&(l=a),n&&(g[a]=n,l=a);var s=t.split("-");if(!l&&s.length>1)return e(s[0])}else{var r=t.name;g[r]=t,l=r}return!i&&l&&(S=l),l||!i&&S},C=function(e,t){if(b(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},$=j;$.l=D,$.i=b,$.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function x(e){this.$L=D(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[y]=!0}var p=x.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(m);if(i){var l=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return $},p.isValid=function(){return!(this.$d.toString()===v)},p.isSame=function(e,t){var n=C(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return C(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<C(e)},p.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var n=this,i=!!$.u(t)||t,c=$.p(e),v=function(e,t){var l=$.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?l:l.endOf(r)},m=function(e,t){return $.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},f=this.$W,x=this.$M,p=this.$D,j="set"+(this.$u?"UTC":"");switch(c){case u:return i?v(1,0):v(31,11);case d:return i?v(1,x):v(0,x+1);case o:var S=this.$locale().weekStart||0,g=(f<S?f+7:f)-S;return v(i?p-g:p+(6-g),x);case r:case h:return m(j+"Hours",0);case s:return m(j+"Minutes",1);case a:return m(j+"Seconds",2);case l:return m(j+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var n,o=$.p(e),c="set"+(this.$u?"UTC":""),v=(n={},n[r]=c+"Date",n[h]=c+"Date",n[d]=c+"Month",n[u]=c+"FullYear",n[s]=c+"Hours",n[a]=c+"Minutes",n[l]=c+"Seconds",n[i]=c+"Milliseconds",n)[o],m=o===r?this.$D+(t-this.$W):t;if(o===d||o===u){var f=this.clone().set(h,1);f.$d[v](m),f.init(),this.$d=f.set(h,Math.min(this.$D,f.daysInMonth())).$d}else v&&this.$d[v](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[$.p(e)]()},p.add=function(i,c){var h,v=this;i=Number(i);var m=$.p(c),f=function(e){var t=C(v);return $.w(t.date(t.date()+Math.round(e*i)),v)};if(m===d)return this.set(d,this.$M+i);if(m===u)return this.set(u,this.$y+i);if(m===r)return f(1);if(m===o)return f(7);var x=(h={},h[a]=t,h[s]=n,h[l]=e,h)[m]||1,p=this.$d.getTime()+i*x;return $.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||v;var i=e||"YYYY-MM-DDTHH:mm:ssZ",l=$.z(this),a=this.$H,s=this.$m,r=this.$M,o=n.weekdays,d=n.months,c=n.meridiem,u=function(e,n,l,a){return e&&(e[n]||e(t,i))||l[n].slice(0,a)},h=function(e){return $.s(a%12||12,e,"0")},m=c||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(f,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return $.s(t.$y,4,"0");case"M":return r+1;case"MM":return $.s(r+1,2,"0");case"MMM":return u(n.monthsShort,r,d,3);case"MMMM":return u(d,r);case"D":return t.$D;case"DD":return $.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,o,2);case"ddd":return u(n.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(a);case"HH":return $.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return m(a,s,!0);case"A":return m(a,s,!1);case"m":return String(s);case"mm":return $.s(s,2,"0");case"s":return String(t.$s);case"ss":return $.s(t.$s,2,"0");case"SSS":return $.s(t.$ms,3,"0");case"Z":return l}return null}(e)||l.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(i,h,v){var m,f=this,x=$.p(h),p=C(i),j=(p.utcOffset()-this.utcOffset())*t,S=this-p,g=function(){return $.m(f,p)};switch(x){case u:m=g()/12;break;case d:m=g();break;case c:m=g()/3;break;case o:m=(S-j)/6048e5;break;case r:m=(S-j)/864e5;break;case s:m=S/n;break;case a:m=S/t;break;case l:m=S/e;break;default:m=S}return v?m:$.a(m)},p.daysInMonth=function(){return this.endOf(d).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=D(e,t,!0);return i&&(n.$L=i),n},p.clone=function(){return $.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},x}(),z=w.prototype;return C.prototype=z,[["$ms",i],["$s",l],["$m",a],["$H",s],["$W",r],["$M",d],["$y",u],["$D",h]].forEach((function(e){z[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,w,C),e.$i=!0),C},C.locale=D,C.isDayjs=b,C.unix=function(e){return C(1e3*e)},C.en=g[S],C.Ls=g,C.p={},C}()}}]);
//# sourceMappingURL=404.23722546.chunk.js.map