"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6419],{34857:(e,t,n)=>{e.exports=n(44734)},44734:(e,t,n)=>{var i,l=n(65043),a=(i=l)&&"object"==typeof i&&"default"in i?i.default:i;function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var r=[],d=!1,s=function(){if(d)for(var e;e=r.shift();)e()},u="undefined"==typeof window?{__unlayer_lastEditorId:0}:window;u.__unlayer_lastEditorId=u.__unlayer_lastEditorId||0;var c=a.forwardRef((function(e,t){var n,i,c,p,m,v,f,h,y,j=e.onLoad,x=e.onReady,g=e.scriptUrl,E=e.minHeight,b=void 0===E?500:E,I=e.style,w=void 0===I?{}:I,S=l.useState(null),_=S[0],C=S[1],k=l.useState(!1),N=k[0],O=k[1],R=l.useMemo((function(){return e.editorId||"editor-"+ ++u.__unlayer_lastEditorId}),[e.editorId]),z=o({},e.options||{},{appearance:null!=(n=e.appearance)?n:null==(i=e.options)?void 0:i.appearance,displayMode:(null==e?void 0:e.displayMode)||(null==(c=e.options)?void 0:c.displayMode)||"email",locale:null!=(p=e.locale)?p:null==(m=e.options)?void 0:m.locale,projectId:null!=(v=e.projectId)?v:null==(f=e.options)?void 0:f.projectId,tools:null!=(h=e.tools)?h:null==(y=e.options)?void 0:y.tools,id:R,source:{name:"react-email-editor",version:"1.7.11"}});l.useImperativeHandle(t,(function(){return{editor:_}}),[_]),l.useEffect((function(){return function(){null==_||_.destroy()}}),[]),l.useEffect((function(){O(!1),function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),r.push((function(){return O(!0)})),function(e){var t=document.querySelectorAll("script"),n=!1;return t.forEach((function(t){t.src.includes(e)&&(n=!0)})),n}(t))s();else{var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){d=!0,s()},document.head.appendChild(n)}}(0,g)}),[g]),l.useEffect((function(){N&&(null==_||_.destroy(),C(unlayer.createEditor(z)))}),[JSON.stringify(z),N]);var G=Object.keys(e).filter((function(e){return/^on/.test(e)}));return l.useEffect((function(){_&&(null==j||j(_),G.forEach((function(t){/^on/.test(t)&&"onLoad"!==t&&"onReady"!==t&&"function"==typeof e[t]&&_.addEventListener(t,e[t])})),x&&_.addEventListener("editor:ready",(function(){x(_)})))}),[_,Object.keys(G).join(",")]),a.createElement("div",{style:{flex:1,display:"flex",minHeight:b}},a.createElement("div",{id:R,style:o({},w,{flex:1})}))}));t.EmailEditor=c},96419:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(4450),l=n(22554),a=n(67682),o=n(65043),r=(n(86178),n(73216)),d=n(35475),s=n(66305),u=n(10216),c=n(34960),p=n(95574),m=n(63994),v=(n(48177),n(34857)),f=n(42145),h=n(70579);const y=()=>{const e=JSON.parse(localStorage.getItem("user")),t=(0,r.Zp)(),n=(0,r.zy)(),{type:y,id:j}=(null===n||void 0===n?void 0:n.state)||{},[x]=(0,p.h)(["Email Template"]),g=(0,o.useRef)(null),[E,b]=(0,o.useState)(!1),[I,w]=(0,o.useState)(""),[S,_]=(0,o.useState)("");return(0,o.useEffect)((()=>{"edit"===y&&(async()=>{const e=await(0,s.x4)("api/email-temp/view/".concat(j));var t,n,i,l,a;e&&200===e.status&&(w(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.templateName),_(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.description),null===g||void 0===g||null===(i=g.current)||void 0===i||null===(l=i.editor)||void 0===l||l.loadDesign(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.design))})()}),[y]),(0,h.jsx)("div",{children:(0,h.jsxs)(u.A,{children:[(0,h.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:1,justifyContent:"space-between",alignItem:"center",children:[(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsxs)(i.Text,{fontSize:"xl",fontWeight:"bold",color:"blackAlpha.900",children:["add"===y?"Create":"Edit"," Template "]})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsxs)(i.Flex,{justifyContent:"right",children:[(0,h.jsx)(l.Button,{size:"sm",variant:"brand",onClick:()=>{var e,t,n,i;E?(null===(e=g.current)||void 0===e||null===(t=e.editor)||void 0===t||t.hidePreview(),b(!1)):(null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.showPreview("desktop"),b(!0))},children:E?"Hide Preview":"Show Preview"}),(0,h.jsx)(l.Button,{size:"sm",variant:"brand",style:{marginLeft:"10px"},onClick:()=>{"add"===y?(()=>{var n,i;""!==I?null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.exportHtml((async n=>{const{html:i}=n,{design:l}=n,a={html:i,design:l,templateName:I,description:S,createBy:null===e||void 0===e?void 0:e._id},o=await(0,s.d_)("api/email-temp/add",a);o&&200===o.status&&(f.oR.success(o.data.message),w("")),t("/email-template")})):f.oR.error("Template Name is required")})():(()=>{var n,i;""!==I?null===(n=g.current)||void 0===n||null===(i=n.editor)||void 0===i||i.exportHtml((async n=>{const{html:i}=n,{design:l}=n,a={html:i,design:l,templateName:I,description:S,createBy:null===e||void 0===e?void 0:e._id},o=await(0,s.yP)("api/email-temp/edit/".concat(j),a);o&&200===o.status&&(f.oR.success(o.data.message),t("/email-template"))})):f.oR.error("Template Name is required")})()},children:"Save"}),(0,h.jsx)(d.N_,{to:"/email-template",style:{marginLeft:"10px"},children:(0,h.jsx)(l.Button,{size:"sm",leftIcon:(0,h.jsx)(c.m6W,{}),variant:"brand",children:"Back"})})]})})]}),(0,h.jsx)(m.E,{}),(0,h.jsx)("div",{children:(0,h.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,mt:2,children:[(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsx)(a.Input,{fontSize:"sm",name:"templateName",placeholder:"Template Name",fontWeight:"500",value:I,onChange:e=>w(e.target.value)})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:6},children:(0,h.jsx)(a.Input,{fontSize:"sm",name:"description",placeholder:"Description",fontWeight:"500",value:S,onChange:e=>_(e.target.value)})}),(0,h.jsx)(i.GridItem,{colSpan:{base:12,md:12},mt:2,children:(0,h.jsx)(v.EmailEditor,{ref:g})})]})})]})})}}}]);
//# sourceMappingURL=6419.6857f9e3.chunk.js.map