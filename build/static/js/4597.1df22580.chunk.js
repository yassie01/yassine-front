(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[4597],{6:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(40848),l=n(4450),s=n(78510),a=n(67682),r=n(95104),o=n(53186),d=n(84626),c=n(22554),u=n(19488),h=n(60446),m=n.n(h),v=n(63516),x=n(65043),f=n(97508),p=n(42145),j=n(89849),S=n(66305),g=n(42101),b=n(70579);const y=e=>{const{onClose:t,isOpen:n,fetchData:h,setAction:y}=e,C=JSON.parse(localStorage.getItem("user")),[D,$]=(0,x.useState)(!1),w=(new Date).toISOString().split(".")[0],[z,I]=(0,x.useState)([]),A=(0,f.wA)(),O={sender:null===C||void 0===C?void 0:C._id,recipient:!0!==e.lead?null===e||void 0===e?void 0:e.contactEmail:null===e||void 0===e?void 0:e.leadEmail,subject:"",message:"",createByContact:null!==e&&void 0!==e&&e.id&&!0!==(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",createByLead:null!==e&&void 0!==e&&e.id&&!0===(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",startDate:"",type:"message",html:"",createBy:null===C||void 0===C?void 0:C._id},M=(0,v.Wx)({initialValues:O,validationSchema:j.y4,enableReinitialize:!0,onSubmit:(e,t)=>{let{resetForm:n}=t;L(),n()}}),{errors:F,touched:T,values:_,handleBlur:B,handleChange:k,handleSubmit:W,setFieldValue:N}=M,L=async()=>{try{$(!0),200===(await(0,S.d_)("api/email/add",_)).status&&(e.onClose(),h(1))}catch(t){console.log(t)}finally{$(!1)}};return(0,x.useEffect)((()=>{"template"===(null===_||void 0===_?void 0:_.type)&&(async()=>{$(!0);const e=await A((0,g.t)());var t;200===e.payload.status?I(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data):p.oR.error("Failed to fetch data","error"),$(!1)})()}),[null===_||void 0===_?void 0:_.type]),(0,b.jsxs)(i.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,b.jsx)(i.mH,{}),(0,b.jsxs)(i.$m,{children:[(0,b.jsx)(i.rQ,{children:"Send Email "}),(0,b.jsx)(i.s_,{}),(0,b.jsx)(i.cw,{children:(0,b.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsx)(a.Input,{fontSize:"sm",onChange:k,onBlur:B,value:_.recipient,name:"recipient",disabled:!0,placeholder:"Recipient",fontWeight:"500",borderColor:F.recipient&&T.recipient?"red.300":null}),(0,b.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",F.recipient&&T.recipient&&F.recipient]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsx)(a.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:k,onBlur:B,value:_.subject,name:"subject",fontWeight:"500",borderColor:F.subject&&T.subject?"red.300":null}),(0,b.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",F.subject&&T.subject&&F.subject]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,b.jsx)(l.Text,{color:"red",children:"*"})]}),(0,b.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:k,onBlur:B,min:m()(w).format("YYYY-MM-DD HH:mm"),value:_.startDate,name:"startDate",fontWeight:"500",borderColor:null!==F&&void 0!==F&&F.startDate&&null!==T&&void 0!==T&&T.startDate?"red.300":null}),(0,b.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",F.startDate&&T.startDate&&F.startDate]})]}),(0,b.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,b.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,b.jsx)(r.z6,{onChange:e=>{N("type",e)},value:_.type,children:(0,b.jsxs)(l.Stack,{direction:"row",children:[(0,b.jsx)(r.sx,{value:"message",children:"Message"}),(0,b.jsx)(r.sx,{value:"template",children:"Template"})]})})]}),(0,b.jsx)(l.GridItem,{colSpan:{base:12},children:"message"===(null===_||void 0===_?void 0:_.type)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:k,onBlur:B,value:_.message,name:"message",fontWeight:"500",borderColor:F.message&&T.message?"red.300":null}),(0,b.jsxs)(l.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",F.message&&T.message&&F.message]})]}):(0,b.jsx)(d.l6,{name:"html",onChange:k,onBlur:B,value:_.html,fontWeight:"500",placeholder:"Select Template",children:null===z||void 0===z?void 0:z.map((e=>(0,b.jsx)("option",{value:null===e||void 0===e?void 0:e.html,children:null===e||void 0===e?void 0:e.templateName},e._id)))})})]})}),(0,b.jsxs)(i.jl,{children:[(0,b.jsx)(c.Button,{size:"sm",variant:"brand",onClick:W,disabled:!!D,children:D?(0,b.jsx)(u.A,{}):"Save"}),(0,b.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{M.resetForm(),t()},children:"Close"})]})]})]})}},9250:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(40848),l=n(4450),s=n(78510),a=n(67682),r=n(53186),o=n(22554),d=n(19488),c=n(60446),u=n.n(c),h=n(63516),m=n(65043),v=n(89849),x=n(66305),f=n(70579);const p=e=>{const{onClose:t,isOpen:n,fetchData:c,setAction:p,cData:j,LData:S}=e,[g,b]=(0,m.useState)(!1),y=(new Date).toISOString().split(".")[0],C=JSON.parse(localStorage.getItem("user")),D={sender:null===C||void 0===C?void 0:C._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:"",createBy:null===C||void 0===C?void 0:C._id},$=(0,h.Wx)({initialValues:D,validationSchema:v.Ar,onSubmit:(e,t)=>{let{resetForm:n}=t;T(),n()}}),{errors:w,touched:z,values:I,handleBlur:A,handleChange:O,handleSubmit:M,setFieldValue:F}=$,T=async()=>{try{b(!0),200===(await(0,x.d_)("api/phoneCall/add",I)).status&&(e.onClose(),c(1))}catch(t){console.log(t)}finally{b(!1)}};return(0,m.useEffect)((()=>{(async()=>{S&&S._id&&!0===e.lead?(F("recipient",S.leadPhoneNumber),F("createByLead",null===e||void 0===e?void 0:e.id),I.recipient=S.leadPhoneNumber):j&&j._id&&!0!==e.lead&&(F("recipient",null===j||void 0===j?void 0:j.phoneNumber),F("createByContact",null===e||void 0===e?void 0:e.id),I.recipient=null===j||void 0===j?void 0:j.phoneNumber)})()}),[e.id,j,S]),(0,f.jsxs)(i.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,f.jsx)(i.mH,{}),(0,f.jsxs)(i.$m,{children:[(0,f.jsx)(i.rQ,{children:"Add Call "}),(0,f.jsx)(i.s_,{}),(0,f.jsx)(i.cw,{children:(0,f.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,f.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,f.jsx)(l.Text,{color:"red",children:"*"})]}),(0,f.jsx)(a.Input,{fontSize:"sm",type:"number",disabled:!0,onChange:O,onBlur:A,value:I.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:w.recipient&&z.recipient?"red.300":null}),(0,f.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.recipient&&z.recipient&&w.recipient]})]}),(0,f.jsxs)(l.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,f.jsx)(l.Text,{color:"red",children:"*"})]}),(0,f.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:O,onBlur:A,min:u()(y).format("YYYY-MM-DD HH:mm"),value:I.startDate,name:"startDate",fontWeight:"500",borderColor:null!==w&&void 0!==w&&w.startDate&&null!==z&&void 0!==z&&z.startDate?"red.300":null}),(0,f.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.startDate&&z.startDate&&w.startDate]})]}),(0,f.jsxs)(l.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,f.jsx)(l.Text,{color:"red",children:"*"})]}),(0,f.jsx)(a.Input,{fontSize:"sm",onChange:O,onBlur:A,value:I.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:w.callDuration&&z.callDuration?"red.300":null}),(0,f.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.callDuration&&z.callDuration&&w.callDuration]})]}),(0,f.jsxs)(l.GridItem,{colSpan:{base:12},children:[(0,f.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,f.jsx)(r.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:O,onBlur:A,value:I.callNotes,name:"callNotes",fontWeight:"500",borderColor:w.callNotes&&z.callNotes?"red.300":null}),(0,f.jsxs)(l.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",w.callNotes&&z.callNotes&&w.callNotes]})]})]})}),(0,f.jsxs)(i.jl,{children:[(0,f.jsx)(o.Button,{size:"sm",variant:"brand",disabled:!!g,onClick:M,children:g?(0,f.jsx)(d.A,{}):"Save"}),(0,f.jsx)(o.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{$.resetForm(),t()},children:"Close"})]})]})]})}},10708:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(89379),l=n(14034),s=n(40848),a=n(22554),r=n(4450),o=n(19488),d=n(63516),c=n(65043),u=n(73216),h=n(66305),m=n(22030),v=n(80899),x=n(48908),f=n(70579);const p=e=>{var t,n;const{data:p}=e,[j,S]=(0,c.useState)(!1),g=Object.fromEntries(((null===e||void 0===e||null===(t=e.contactData)||void 0===t?void 0:t.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),[b,y]=(0,c.useState)((0,i.A)((0,i.A)({},g),{},{createBy:JSON.parse(localStorage.getItem("user"))._id})),C=(0,u.g)(),D=(0,d.Wx)({initialValues:b,enableReinitialize:!0,validationSchema:v.Ik().shape((0,m.g)(null===e||void 0===e||null===(n=e.contactData)||void 0===n?void 0:n.fields)),onSubmit:(e,t)=>{let{resetForm:n}=t;F()}}),{errors:$,touched:w,values:z,handleBlur:I,handleChange:A,handleSubmit:O,setFieldValue:M}=D,F=async()=>{try{S(!0),200===(await(0,h.yP)("api/form/edit/".concat((null===e||void 0===e?void 0:e.selectedId)||C.id),(0,i.A)((0,i.A)({},z),{},{moduleId:null===e||void 0===e?void 0:e.moduleId}))).status&&(e.onClose(),e.setAction((e=>!e)))}catch(t){console.log(t)}finally{S(!1)}},T=()=>{e.onClose(!1),e.setSelectedId&&(null===e||void 0===e||e.setSelectedId())};let _;return(0,c.useEffect)((()=>{(async()=>{if(p)y((e=>(0,i.A)((0,i.A)({},e),p)));else if(null!==e&&void 0!==e&&e.selectedId||C.id)try{S(!0),_=await(0,h.x4)("api/contact/view/",null!==e&&void 0!==e&&e.selectedId?null===e||void 0===e?void 0:e.selectedId:C.id),y((e=>{var t,n;return(0,i.A)((0,i.A)({},e),null===(t=_)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.contact)}))}catch(t){console.error(t)}finally{S(!1)}})()}),[null===e||void 0===e?void 0:e.selectedId,p]),(0,f.jsx)("div",{children:(0,f.jsxs)(s._s,{isOpen:e.isOpen,size:e.size,children:[(0,f.jsx)(s.QP,{}),(0,f.jsxs)(s.zj,{children:[(0,f.jsxs)(s.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Edit Contact",(0,f.jsx)(a.IconButton,{onClick:T,icon:(0,f.jsx)(l.CloseIcon,{})})]}),(0,f.jsx)(s.ys,{children:j?(0,f.jsx)(r.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,f.jsx)(o.A,{})}):(0,f.jsx)(x.A,{moduleData:e.contactData,values:z,setFieldValue:M,handleChange:A,handleBlur:I,errors:$,touched:w})}),(0,f.jsxs)(s.tb,{children:[(0,f.jsx)(a.Button,{sx:{textTransform:"capitalize"},variant:"brand",type:"submit",size:"sm",disabled:!!j,onClick:O,children:j?(0,f.jsx)(o.A,{}):"Update"}),(0,f.jsx)(a.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:T,children:"Close"})]})]})]})})}},14597:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var i=n(65043),l=n(73216),s=n(19754),a=n(4450),r=n(85376),o=n(14034),d=n(17368),c=n(66305),u=n(40265),h=n(10708),m=n(6),v=n(9250),x=n(95574),f=n(88031),p=n(40848),j=n(22554),S=n(19488),g=n(63516),b=n(23848),y=n(70579);const C=e=>{const{onClose:t,isOpen:n,text:s,customFields:r}=e,[o,d]=(0,i.useState)(!1),c=(0,l.Zp)(),u=(0,g.Wx)({initialValues:{contact:""},onSubmit:(e,t)=>{let{resetForm:n}=t;w(),n()}}),{errors:h,touched:m,values:v,handleBlur:x,handleChange:f,handleSubmit:C,setFieldValue:D,resetForm:$}=u,w=async()=>{try{d(!0),$(),v.contact&&(t(),c("/contactImport",{state:{fileData:v.contact,customFields:r}}))}catch(e){console.log(e)}finally{d(!1)}};return(0,y.jsxs)(p.aF,{onClose:t,isOpen:n,isCentered:!0,children:[(0,y.jsx)(p.mH,{}),(0,y.jsxs)(p.$m,{children:[(0,y.jsx)(p.rQ,{children:"Import Contacts"}),(0,y.jsx)(p.s_,{}),(0,y.jsx)(p.cw,{children:(0,y.jsx)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,y.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,y.jsx)(b.A,{count:v.contact.length,onFileSelect:e=>D("contact",e),text:s}),(0,y.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",h.contact&&m.contact&&(0,y.jsxs)(y.Fragment,{children:["Please Select ",s]})]})]})})}),(0,y.jsxs)(p.jl,{children:[(0,y.jsx)(j.Button,{size:"sm",variant:"brand",onClick:C,disabled:!!o,children:o?(0,y.jsx)(S.A,{}):"Save"}),(0,y.jsx)(j.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{t(),u.resetForm()},children:"Close"})]})]})]})};var D=n(48177),$=n(26547),w=n(97508),z=n(20850),I=n(42145);const A=()=>{var e,t,n,p;const j=(0,l.Zp)(),[S,g,b]=(0,x.h)(["Contacts","Emails","Calls"]),{isOpen:A,onOpen:O,onClose:M}=(0,s.j1)(),F=(0,w.wA)(),[T,_]=(0,i.useState)(!1),[B,k]=(0,i.useState)(!1),[W,N]=(0,i.useState)([]),[L,H]=(0,i.useState)([]),[V,E]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(!1),[P,U]=(0,i.useState)(!1),[J,R]=(0,i.useState)(),[Q,Z]=(0,i.useState)(!1),[q,K]=(0,i.useState)(),[X,ee]=(0,i.useState)([]),[te,ne]=(0,i.useState)(!1),[ie,le]=(0,i.useState)(""),[se,ae]=(0,i.useState)({}),re=(0,w.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.contactData)||void 0===t?void 0:t.data})),oe=async()=>{var e,t,n,i,l,s,c,u;_(!0);const h=await F((0,z.I)());var m;200===(null===h||void 0===h||null===(e=h.payload)||void 0===e?void 0:e.status)?H(null===h||void 0===h||null===(m=h.payload)||void 0===m?void 0:m.data):I.oR.error("Failed to fetch data","error");const v={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:t}=e;return(0,y.jsx)(a.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,y.jsxs)(r.W1,{isLazy:!0,children:[(0,y.jsx)(r.IU,{children:(0,y.jsx)(d.txp,{})}),(0,y.jsxs)(r.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===S||void 0===S?void 0:S.update)&&(0,y.jsx)(r.Dr,{py:2.5,icon:(0,y.jsx)(o.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;E(!0),K(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===b||void 0===b?void 0:b.create)&&(0,y.jsx)(r.Dr,{py:2.5,width:"165px",onClick:()=>{var e;ae(null===t||void 0===t?void 0:t.original),U(!0),R(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id)},icon:(0,y.jsx)(o.PhoneIcon,{fontSize:15,mb:1}),children:"Create Call"}),(null===g||void 0===g?void 0:g.create)&&(0,y.jsx)(r.Dr,{py:2.5,width:"165px",onClick:()=>{var e,n,i,l;i=null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id,l=null===t||void 0===t?void 0:t.original,i&&(le(null===l||void 0===l?void 0:l.email),Z(!0)),K(null===t||void 0===t||null===(n=t.values)||void 0===n?void 0:n._id)},icon:(0,y.jsx)(o.EmailIcon,{fontSize:15,mb:1}),children:"Send Email"}),(null===S||void 0===S?void 0:S.view)&&(0,y.jsx)(r.Dr,{py:2.5,color:"green",icon:(0,y.jsx)(o.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;j("/contactView/".concat(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id))},children:"View"}),(null===S||void 0===S?void 0:S.delete)&&(0,y.jsx)(r.Dr,{py:2.5,color:"red",icon:(0,y.jsx)(o.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;G(!0),ee([null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},x=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...null!==h&&void 0!==h&&null!==(t=h.payload)&&void 0!==t&&t.data&&h.payload.data.length>0&&(null===(n=h.payload.data[0])||void 0===n||null===(i=n.fields)||void 0===i||null===(l=i.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&(null===e||void 0===e?void 0:e.isView))))||void 0===l?void 0:l.map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name,cell:e=>(0,y.jsx)("div",{className:"selectOpt",children:(0,y.jsx)(a.Text,{onClick:()=>{var t,n;j("/contactView/".concat(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n._id))},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e?void 0:e.value)||"-"})})}))))||[],...((null===h||void 0===h||null===(s=h.payload)||void 0===s||null===(c=s.data)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.fields)||[]).filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField)&&!(null!==e&&void 0!==e&&e.isView))).map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name}))),...null!==S&&void 0!==S&&S.update||null!==S&&void 0!==S&&S.view||null!==S&&void 0!==S&&S.delete?[v]:[]];N(x),_(!1)};return(0,i.useEffect)((async()=>{await F((0,$.h)()),oe()}),[B]),(0,y.jsxs)("div",{children:[(0,y.jsx)(a.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:4,children:!T&&(0,y.jsx)(a.GridItem,{colSpan:6,children:(0,y.jsx)(f.A,{title:"Contacts",isLoding:T,columnData:null!==W&&void 0!==W?W:[],allData:null!==re&&void 0!==re?re:[],tableData:re,tableCustomFields:(null===L||void 0===L||null===(e=L[0])||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],access:S,onOpen:O,selectedValues:X,setSelectedValues:ee,setDelete:G,setIsImport:ne})})}),A&&(0,y.jsx)(u.A,{isOpen:A,size:"lg",contactData:L[0],onClose:M,setAction:k,action:B}),V&&(0,y.jsx)(h.A,{isOpen:V,size:"lg",contactData:L[0],selectedId:q,setSelectedId:K,onClose:E,setAction:k,moduleId:null===L||void 0===L||null===(n=L[0])||void 0===n?void 0:n._id}),Y&&(0,y.jsx)(D.A,{isOpen:Y,onClose:()=>G(!1),type:"Contacts",handleDeleteData:async e=>{try{_(!0),200===(await(0,c.Vn)("api/contact/deleteMany",e)).status&&(ee([]),G(!1),k((e=>!e)))}catch(t){console.log(t)}finally{_(!1)}},ids:X}),Q&&(0,y.jsx)(m.A,{fetchData:$.h,isOpen:Q,onClose:Z,id:q,contactEmail:ie}),P&&(0,y.jsx)(v.A,{fetchData:$.h,isOpen:P,onClose:U,id:J,cData:se}),te&&(0,y.jsx)(C,{text:"Contact file",isOpen:te,onClose:ne,customFields:(null===L||void 0===L||null===(p=L[0])||void 0===p?void 0:p.fields)||[]})]})}},23848:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(31206),l=n(4450),s=n(3458),a=n(71997),r=n(27149),o=n(70579);function d(e){const{count:t,text:n,onFileSelect:d}=e,c=(0,i.dU)("secondaryGray.900","white"),u=(0,i.dU)("brand.500","white");return(0,o.jsxs)(l.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,o.jsx)(l.GridItem,{colSpan:{base:12},children:(0,o.jsx)(a.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===n?"img":"",csv:"csv",height:"100%",onFileSelect:d,isMultipleAllow:!1,content:(0,o.jsxs)(l.Box,{children:[(0,o.jsx)(s.In,{as:r.vpy,w:"80px",h:"80px",color:u}),(0,o.jsx)(l.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,o.jsx)(l.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),t>0&&(0,o.jsxs)(l.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",t]})]})})}),(0,o.jsx)(l.GridItem,{colSpan:{base:12},children:(0,o.jsxs)(l.Flex,{direction:"column",children:[(0,o.jsxs)(l.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",n]}),(0,o.jsx)(l.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},40265:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(89379),l=n(14034),s=n(40848),a=n(22554),r=n(19488),o=n(63516),d=n(65043),c=n(66305),u=n(22030),h=n(48908),m=n(80899),v=n(70579);const x=e=>{var t,n;const[x,f]=(0,d.useState)(!1),p=Object.fromEntries(((null===e||void 0===e||null===(t=e.contactData)||void 0===t?void 0:t.fields)||[]).map((e=>[null===e||void 0===e?void 0:e.name,""]))),j=(0,i.A)((0,i.A)({},p),{},{createBy:JSON.parse(localStorage.getItem("user"))._id}),S=(0,o.Wx)({initialValues:j,validationSchema:m.Ik().shape((0,u.g)(null===e||void 0===e||null===(n=e.contactData)||void 0===n?void 0:n.fields)),onSubmit:(e,t)=>{let{resetForm:n}=t;z(),n()}}),{errors:g,touched:b,values:y,handleBlur:C,handleChange:D,handleSubmit:$,setFieldValue:w}=S,z=async()=>{try{var t;f(!0),200===(await(0,c.d_)("api/form/add",(0,i.A)((0,i.A)({},y),{},{moduleId:null===e||void 0===e||null===(t=e.contactData)||void 0===t?void 0:t._id}))).status&&(e.onClose(),e.setAction((e=>!e)))}catch(n){console.log(n)}finally{f(!1)}};return(0,v.jsx)("div",{children:(0,v.jsxs)(s._s,{isOpen:e.isOpen,size:e.size,children:[(0,v.jsx)(s.QP,{}),(0,v.jsxs)(s.zj,{children:[(0,v.jsxs)(s.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Add Contact",(0,v.jsx)(a.IconButton,{onClick:e.onClose,icon:(0,v.jsx)(l.CloseIcon,{})})]}),(0,v.jsx)(s.ys,{children:(0,v.jsx)(h.A,{moduleData:e.contactData,values:y,setFieldValue:w,handleChange:D,handleBlur:C,errors:g,touched:b})}),(0,v.jsxs)(s.tb,{children:[(0,v.jsx)(a.Button,{sx:{textTransform:"capitalize"},variant:"brand",disabled:!!x,type:"submit",size:"sm",onClick:$,children:x?(0,v.jsx)(r.A,{}):"Save"}),(0,v.jsx)(a.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:()=>{S.resetForm(),e.onClose()},children:"Close"})]})]})]})})}},53186:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var i=n(78510),l=n(59522),s=n(23216),a=n(65043);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var o=["className","rows"],d=(0,l.Rf)((function(e,t){var n=(0,l.Vl)("Textarea",e),d=(0,l.MN)(e),c=d.className,u=d.rows,h=function(e,t){if(null==e)return{};var n,i,l={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(d,o),m=(0,i.useFormControl)(h),v=u?(0,s.cJ)(n,["h","minH","height","minHeight"]):n;return a.createElement(l.Bv.textarea,r({ref:t,rows:u},m,{className:(0,s.cx)("chakra-textarea",c),__css:v}))}));s.gt&&(d.displayName="Textarea")},60446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",l="second",s="minute",a="hour",r="day",o="week",d="month",c="quarter",u="year",h="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},p=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},j={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),l=n%60;return(t<=0?"+":"-")+p(i,2,"0")+":"+p(l,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),l=t.clone().add(i,d),s=n-l<0,a=t.clone().add(i+(s?-1:1),d);return+(-(i+(n-l)/(s?l-a:a-l))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:o,d:r,D:h,h:a,m:s,s:l,ms:i,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},S="en",g={};g[S]=f;var b="$isDayjsObject",y=function(e){return e instanceof w||!(!e||!e[b])},C=function e(t,n,i){var l;if(!t)return S;if("string"==typeof t){var s=t.toLowerCase();g[s]&&(l=s),n&&(g[s]=n,l=s);var a=t.split("-");if(!l&&a.length>1)return e(a[0])}else{var r=t.name;g[r]=t,l=r}return!i&&l&&(S=l),l||!i&&S},D=function(e,t){if(y(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},$=j;$.l=C,$.i=y,$.w=function(e,t){return D(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function f(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(v);if(i){var l=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return $},p.isValid=function(){return!(this.$d.toString()===m)},p.isSame=function(e,t){var n=D(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return D(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<D(e)},p.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var n=this,i=!!$.u(t)||t,c=$.p(e),m=function(e,t){var l=$.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?l:l.endOf(r)},v=function(e,t){return $.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},x=this.$W,f=this.$M,p=this.$D,j="set"+(this.$u?"UTC":"");switch(c){case u:return i?m(1,0):m(31,11);case d:return i?m(1,f):m(0,f+1);case o:var S=this.$locale().weekStart||0,g=(x<S?x+7:x)-S;return m(i?p-g:p+(6-g),f);case r:case h:return v(j+"Hours",0);case a:return v(j+"Minutes",1);case s:return v(j+"Seconds",2);case l:return v(j+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var n,o=$.p(e),c="set"+(this.$u?"UTC":""),m=(n={},n[r]=c+"Date",n[h]=c+"Date",n[d]=c+"Month",n[u]=c+"FullYear",n[a]=c+"Hours",n[s]=c+"Minutes",n[l]=c+"Seconds",n[i]=c+"Milliseconds",n)[o],v=o===r?this.$D+(t-this.$W):t;if(o===d||o===u){var x=this.clone().set(h,1);x.$d[m](v),x.init(),this.$d=x.set(h,Math.min(this.$D,x.daysInMonth())).$d}else m&&this.$d[m](v);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[$.p(e)]()},p.add=function(i,c){var h,m=this;i=Number(i);var v=$.p(c),x=function(e){var t=D(m);return $.w(t.date(t.date()+Math.round(e*i)),m)};if(v===d)return this.set(d,this.$M+i);if(v===u)return this.set(u,this.$y+i);if(v===r)return x(1);if(v===o)return x(7);var f=(h={},h[s]=t,h[a]=n,h[l]=e,h)[v]||1,p=this.$d.getTime()+i*f;return $.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||m;var i=e||"YYYY-MM-DDTHH:mm:ssZ",l=$.z(this),s=this.$H,a=this.$m,r=this.$M,o=n.weekdays,d=n.months,c=n.meridiem,u=function(e,n,l,s){return e&&(e[n]||e(t,i))||l[n].slice(0,s)},h=function(e){return $.s(s%12||12,e,"0")},v=c||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(x,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return $.s(t.$y,4,"0");case"M":return r+1;case"MM":return $.s(r+1,2,"0");case"MMM":return u(n.monthsShort,r,d,3);case"MMMM":return u(d,r);case"D":return t.$D;case"DD":return $.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,o,2);case"ddd":return u(n.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(s);case"HH":return $.s(s,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return v(s,a,!0);case"A":return v(s,a,!1);case"m":return String(a);case"mm":return $.s(a,2,"0");case"s":return String(t.$s);case"ss":return $.s(t.$s,2,"0");case"SSS":return $.s(t.$ms,3,"0");case"Z":return l}return null}(e)||l.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(i,h,m){var v,x=this,f=$.p(h),p=D(i),j=(p.utcOffset()-this.utcOffset())*t,S=this-p,g=function(){return $.m(x,p)};switch(f){case u:v=g()/12;break;case d:v=g();break;case c:v=g()/3;break;case o:v=(S-j)/6048e5;break;case r:v=(S-j)/864e5;break;case a:v=S/n;break;case s:v=S/t;break;case l:v=S/e;break;default:v=S}return m?v:$.a(v)},p.daysInMonth=function(){return this.endOf(d).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=C(e,t,!0);return i&&(n.$L=i),n},p.clone=function(){return $.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),z=w.prototype;return D.prototype=z,[["$ms",i],["$s",l],["$m",s],["$H",a],["$W",r],["$M",d],["$y",u],["$D",h]].forEach((function(e){z[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),D.extend=function(e,t){return e.$i||(e(t,w,D),e.$i=!0),D},D.locale=C,D.isDayjs=y,D.unix=function(e){return D(1e3*e)},D.en=g[S],D.Ls=g,D.p={},D}()}}]);
//# sourceMappingURL=4597.1df22580.chunk.js.map