"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6853],{3972:(e,l,a)=>{a.d(l,{A:()=>p});var t=a(4450),i=a(84626),d=a(95104),s=a(10216),n=a(86178),o=a.n(n),r=a(65043),u=a(22019),c=a(31899),v=a.n(c),m=(a(25015),a(97508)),x=a(66305),h=a(70579);const p=e=>{const{dashboard:l}=e,[a,n]=(0,r.useState)({}),[c,p]=(0,r.useState)(new Date(new Date-12096e5)),[f,j]=(0,r.useState)(new Date),[b,C]=(0,r.useState)("all"),[y,g]=(0,r.useState)("day"),A=(0,m.d4)((e=>{var l;return null===e||void 0===e||null===(l=e.modules)||void 0===l?void 0:l.data})),w=JSON.parse(localStorage.getItem("user")),S=null===A||void 0===A?void 0:A.find((e=>"Emails"===(null===e||void 0===e?void 0:e.moduleName))),D=null===A||void 0===A?void 0:A.find((e=>"Calls"===(null===e||void 0===e?void 0:e.moduleName))),E=Object.keys(a).map((e=>{const l=a[e][0];let t=[];var i,d;null!==l&&void 0!==l&&l.Emails&&null!==S&&void 0!==S&&S.isActive&&(t=t.concat(null===l||void 0===l||null===(i=l.Emails)||void 0===i?void 0:i.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Emailcount})))));null!==l&&void 0!==l&&l.Calls&&null!==D&&void 0!==D&&D.isActive&&(t=t.concat(null===l||void 0===l||null===(d=l.Calls)||void 0===d?void 0:d.map((e=>({x:null===e||void 0===e?void 0:e.date,y:null===e||void 0===e?void 0:e.Callcount})))));return{name:"Email"===e&&null!==S&&void 0!==S&&S.isActive?"Emails":"Call"===e&&null!==D&&void 0!==D&&D.isActive?"Call":"Email"===e&&null!==S&&void 0!==S&&S.isActive&&"Call"===e&&null!==D&&void 0!==D&&D.isActive?e:"",data:t}}));(0,r.useEffect)((()=>{(async()=>{const e={startDate:o()(c).format("YYYY-MM-DD"),endDate:o()(f).format("YYYY-MM-DD"),filter:y};let l=await(0,x.d_)("superAdmin"===w.role?"api/reporting/index":"api/reporting/index?sender=".concat(w._id),e);200===l.status&&n(null===l||void 0===l?void 0:l.data)})()}),[c,f,y]);const k="all"===b?null===E||void 0===E?void 0:E.filter((e=>""!==(null===e||void 0===e?void 0:e.name))):null===E||void 0===E?void 0:E.filter((e=>(null===e||void 0===e?void 0:e.name)===b));return(0,h.jsxs)(s.A,{children:[!l&&(0,h.jsxs)(t.Box,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",mb:4,children:[(0,h.jsxs)(i.l6,{value:b,onChange:e=>C(e.target.value),size:"sm",width:{base:"100%",md:"15%"},mb:{base:3,md:"auto"},children:[(0,h.jsx)("option",{value:"all",children:"All"}),(0,h.jsx)("option",{value:"EmailDetails",children:"Email"}),(0,h.jsx)("option",{value:"outboundcall",children:"Call"})]}),(0,h.jsxs)(t.Box,{width:{base:"100%",md:"auto"},flexWrap:"wrap",justifyContent:"left",mb:{base:3,md:"auto"},display:"flex",children:[(0,h.jsx)(v(),{selected:c,onChange:e=>p(e),className:"datePickerBorder"}),(0,h.jsx)(v(),{selected:f,onChange:e=>j(e),className:"datePickerBorder"})]}),(0,h.jsx)(t.Box,{width:{base:"100%",md:"auto"},display:"flex",justifyContent:"right",mb:{base:3,md:"auto"},children:(0,h.jsx)(d.z6,{onChange:e=>g(e),value:y,children:(0,h.jsxs)(t.Stack,{direction:"row",children:[(0,h.jsx)(d.sx,{value:"day",children:"Daily"}),(0,h.jsx)(d.sx,{value:"week",children:"Weekly"})]})})})]}),(0,h.jsx)("div",{id:"chart",children:(0,h.jsx)("div",{id:"chart-timeline",children:k&&(0,h.jsx)(u.A,{options:{chart:{id:"line-chart"},xaxis:{type:"datetime"},yaxis:{title:{text:"Count"}},dataLabels:{enabled:!0}},series:k,type:"area",height:300})})})]})}},6853:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});var t=a(10216),i=a(65043),d=(a(25015),a(66305)),s=a(3972),n=a(88031),o=a(70579);const r=()=>{const[e,l]=(0,i.useState)([]),[a,r]=(0,i.useState)(!1),[u,c]=(0,i.useState)([]),v=JSON.parse(localStorage.getItem("user")),m=[{Header:"Email Sent",accessor:"emailsent"},{Header:"Outbound Calls",accessor:"outboundcall"}];"superAdmin"===v.role&&m.unshift({Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Name",accessor:"firstName"});return(0,i.useEffect)((()=>{(async()=>{r(!0);let e=await(0,d.x4)("superAdmin"===v.role?"api/reporting":"api/reporting?_id=".concat(v._id));e&&200===e.status&&l(null===e||void 0===e?void 0:e.data),r(!1)})()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(s.A,{}),(0,o.jsx)(t.A,{mt:4,children:(0,o.jsx)(n.A,{title:"Reports",isLoding:a,columnData:null!==m&&void 0!==m?m:[],allData:null!==e&&void 0!==e?e:[],tableData:e,AdvanceSearch:!1,checkBox:!1,tableCustomFields:[],deleteMany:!0})})]})}}}]);
//# sourceMappingURL=6853.a7dd9a7e.chunk.js.map