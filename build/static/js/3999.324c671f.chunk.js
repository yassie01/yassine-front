"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[3999],{3999:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var i=a(65043),o=a(73216),l=a(14034),n=a(19754),s=a(4450),r=a(85376),d=a(22554),c=a(66305),u=a(95574),p=a(88031),m=a(17368),f=a(86178),x=a.n(f),v=a(32412),h=a(97508),b=(a(27560),a(42145)),g=a(63516),y=a(80899),S=a(40848),j=a(78510),C=a(67682),_=a(84626),D=a(19488),A=a(43017),N=a(70579);const T=e=>{const{state:t,allData:a,advanceSearch:i,setAdvanceSearch:o,isLoding:l,setSearchedData:n,setDisplaySearchData:r,setSearchClear:c,setSearchbox:u}=e,p=(0,h.wA)(),m=y.Ik({opportunityName:y.Yj(),accountName2:y.Yj(),opportunityAmount:y.Yj(),expectedCloseDate:y.Yj(),salesStage:y.Yj()}),f=(0,g.Wx)({initialValues:{opportunityName:"",accountName2:"",opportunityAmount:"",expectedCloseDate:"",salesStage:""},validationSchema:m,onSubmit:(e,t)=>{let{resetForm:i}=t;p((0,A.gB)(e)),p((0,A.DW)({values:e,allData:a,type:"Opprtunity"}));const l=[{name:["opportunityName"],value:e.opportunityName},{name:["accountName2"],value:e.accountName2},{name:["opportunityAmount"],value:e.opportunityAmount},{name:["expectedCloseDate"],value:e.expectedCloseDate},{name:["salesStage"],value:e.salesStage}];p((0,A.Tr)(l.filter((e=>e.value)))),r(!0),o(!1),i(),u("")}}),{errors:x,touched:v,values:b,handleBlur:T,handleChange:w,handleSubmit:O,setFieldValue:F,resetForm:k,dirty:I}=f;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(S.aF,{onClose:()=>{o(!1),k()},isOpen:i,isCentered:!0,children:[(0,N.jsx)(S.mH,{}),(0,N.jsxs)(S.$m,{children:[(0,N.jsx)(S.rQ,{children:"Advance Search"}),(0,N.jsx)(S.s_,{onClick:()=>{o(!1),k()}}),(0,N.jsx)(S.cw,{children:(0,N.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Opportunity Name"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.opportunityName,name:"opportunityName",placeholder:"Enter Opportunity Name",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",x.opportunityName&&v.opportunityName&&x.opportunityName]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Account Name"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.accountName2,name:"accountName2",placeholder:"Enter Account Name",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",x.accountName2&&v.accountName2&&x.accountName2]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Opportunity Amount"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.opportunityAmount,name:"opportunityAmount",placeholder:"Enter Opportunity Amount",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",x.opportunityAmount&&v.opportunityAmount&&x.opportunityAmount]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Expected Close Date"}),(0,N.jsx)(C.Input,{fontSize:"sm",onChange:w,onBlur:T,value:null===b||void 0===b?void 0:b.expectedCloseDate,name:"expectedCloseDate",type:"date",fontWeight:"500"}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",x.expectedCloseDate&&v.expectedCloseDate&&x.expectedCloseDate]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Sales Stage"}),(0,N.jsxs)(_.l6,{value:b.salesStage,name:"salesStage",onChange:w,fontWeight:"500",placeholder:"Sales Stage",children:[(0,N.jsx)("option",{value:"Prospecting",children:"Prospecting"}),(0,N.jsx)("option",{value:"Qualification",children:"Qualification"}),(0,N.jsx)("option",{value:"Needs Analysis",children:"Needs Analysis"}),(0,N.jsx)("option",{value:"Value Propositon",children:"Value Propositon"}),(0,N.jsx)("option",{value:"Identifying Decision Makers",children:"Identifying Decision Makers"}),(0,N.jsx)("option",{value:"Perception Analysis",children:"Perception Analysis"}),(0,N.jsx)("option",{value:"Proposal/Price Quote",children:"Proposal/Price Quote"}),(0,N.jsx)("option",{value:"Negotiation/Review",children:"Negotiation/Review"}),(0,N.jsx)("option",{value:"Closed/Won",children:"Closed/Won"}),(0,N.jsx)("option",{value:"Closed/Lost",children:"Closed/Lost"})]}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",x.salesStage&&v.salesStage&&x.salesStage]})]})]})}),(0,N.jsxs)(S.jl,{children:[(0,N.jsx)(d.Button,{size:"sm",variant:"brand",mr:2,onClick:O,disabled:!(!l&&I),children:l?(0,N.jsx)(D.A,{}):"Search"}),(0,N.jsx)(d.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>k(),children:"Clear"})]})]})]})})};var w=a(46524),O=a(48177),F=a(23848);const k=e=>{const{onClose:t,isOpen:a,text:l,customFields:n}=e,[r,c]=(0,i.useState)(!1),u=(0,o.Zp)(),p=(0,g.Wx)({initialValues:{opprotunities:""},onSubmit:(e,t)=>{let{resetForm:a}=t;C(),a()}}),{errors:m,touched:f,values:x,handleBlur:v,handleChange:h,handleSubmit:b,setFieldValue:y,resetForm:j}=p,C=async()=>{try{c(!0),j(),x.opprotunities&&(t(),u("/opprotunitiesImport",{state:{fileData:x.opprotunities,customFields:n}}))}catch(e){console.log(e)}finally{c(!1)}};return(0,N.jsxs)(S.aF,{onClose:t,isOpen:a,isCentered:!0,children:[(0,N.jsx)(S.mH,{}),(0,N.jsxs)(S.$m,{children:[(0,N.jsx)(S.rQ,{children:"Import Opprotunities"}),(0,N.jsx)(S.s_,{}),(0,N.jsx)(S.cw,{children:(0,N.jsx)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,N.jsxs)(s.GridItem,{colSpan:{base:12},children:[(0,N.jsx)(F.A,{count:x.opprotunities.length,onFileSelect:e=>y("opprotunities",e),text:l}),(0,N.jsxs)(s.Text,{mb:"10px",color:"red",children:[" ",m.opprotunities&&f.opprotunities&&(0,N.jsxs)(N.Fragment,{children:["Please Select ",l]})]})]})})}),(0,N.jsxs)(S.jl,{children:[(0,N.jsx)(d.Button,{size:"sm",variant:"brand",onClick:b,disabled:!!r,children:r?(0,N.jsx)(D.A,{}):"Save"}),(0,N.jsx)(d.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{t(),p.resetForm()},children:"Close"})]})]})]})},I=e=>{const[t,a]=(0,i.useState)(!1),{isOpen:f,onOpen:g,onClose:y}=(0,n.j1)(),[S,j]=(0,i.useState)([]),[C,_]=(0,i.useState)(!1),[D,A]=(0,i.useState)([]),[F,I]=(0,i.useState)(""),z=JSON.parse(localStorage.getItem("user")),W=(0,o.Zp)(),V=(0,h.wA)(),[P,G]=(0,i.useState)(!1),[M,B]=(0,i.useState)([]),[L,q]=(0,i.useState)(!1),[E,H]=(0,i.useState)([]),[Q,Y]=(0,i.useState)(),[R,U]=(0,i.useState)(!1),[Z,$]=(0,i.useState)(!1),[J,K]=(0,i.useState)(""),[X,ee]=(0,i.useState)(!1),[te,ae]=(0,u.h)(["Opportunities","Account"]),ie={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:t,i:a}=e;return(0,N.jsx)(s.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,N.jsxs)(r.W1,{isLazy:!0,children:[(0,N.jsx)(r.IU,{children:(0,N.jsx)(m.txp,{})}),(0,N.jsxs)(r.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===te||void 0===te?void 0:te.update)&&(0,N.jsx)(r.Dr,{py:2.5,icon:(0,N.jsx)(l.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;K("edit"),g(),Y(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===te||void 0===te?void 0:te.view)&&(0,N.jsx)(r.Dr,{py:2.5,color:"green",icon:(0,N.jsx)(l.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;W("/opportunitiesView/".concat(null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id))},children:"View"}),(null===te||void 0===te?void 0:te.delete)&&(0,N.jsx)(r.Dr,{py:2.5,color:"red",icon:(0,N.jsx)(l.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;U(!0),j([null===t||void 0===t||null===(e=t.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},oe=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Opportunity Name",accessor:"opportunityName",cell:e=>(0,N.jsx)("div",{className:"selectOpt",children:(0,N.jsx)(s.Text,{onClick:()=>{var t;return le(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original._id)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})},{Header:"Account Name",accessor:"accountName",cell:e=>{var t,a,i,o,l,n,r,d;return"superAdmin"===z.role||null!==ae&&void 0!==ae&&ae.view?(0,N.jsx)("div",{className:"selectOpt",children:(0,N.jsx)(s.Text,{onClick:()=>{var t,a;return W(null!==(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.original.accountName)&&"/accountView/".concat(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original.accountName))},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(t=e.row)&&void 0!==t&&null!==(a=t.original)&&void 0!==a&&a.accountName2?null===e||void 0===e||null===(i=e.row)||void 0===i||null===(o=i.original)||void 0===o?void 0:o.accountName2:"-"})}):(0,N.jsx)(s.Text,{children:null!==e&&void 0!==e&&null!==(l=e.row)&&void 0!==l&&null!==(n=l.original)&&void 0!==n&&n.accountName2?null===e||void 0===e||null===(r=e.row)||void 0===r||null===(d=r.original)||void 0===d?void 0:d.accountName2:"-"})}},{Header:"Opportunity Amount",accessor:"opportunityAmount"},{Header:"Expected Close Date",accessor:"expectedCloseDate",cell:e=>(0,N.jsx)("div",{children:x()(null===e||void 0===e?void 0:e.value).format("YYYY-MM-DD")})},{Header:"Sales Stage",accessor:"salesStage"},...null!==te&&void 0!==te&&te.update||null!==te&&void 0!==te&&te.view||null!==te&&void 0!==te&&te.delete?[ie]:[]],le=e=>{W("/opportunitiesView/".concat(e))};return(0,i.useEffect)((()=>{(async()=>{G(!0);const e=await V((0,w.o)());var t;200===e.payload.status?B(null===e||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.data):b.oR.error("Failed to fetch data","error"),G(!1)})()}),[t]),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.A,{title:"Opprtunities",isLoding:P,columnData:null!==oe&&void 0!==oe?oe:[],allData:null!==M&&void 0!==M?M:[],tableData:M,searchDisplay:L,setSearchDisplay:q,searchedDataOut:E,setSearchedDataOut:H,tableCustomFields:[],access:te,setIsImport:ee,onOpen:()=>{g(),K("add")},selectedValues:S,setSelectedValues:j,setDelete:U,deleteMany:!1,AdvanceSearch:(0,N.jsx)(d.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,N.jsx)(l.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>_(!0),children:"Advance Search"}),getTagValuesOutSide:D,searchboxOutside:F,setGetTagValuesOutside:A,setSearchboxOutside:I,handleSearchType:"OpprtunitySearch"}),(0,N.jsx)(T,{advanceSearch:C,setAdvanceSearch:_,setSearchedData:H,setDisplaySearchData:q,allData:null!==M&&void 0!==M?M:[],setAction:a,setGetTagValues:A,setSearchbox:I}),(0,N.jsx)(v.A,{isOpen:f,size:"lg",onClose:y,setAction:a,type:J,selectedId:Q}),(0,N.jsx)(O.A,{isOpen:R,onClose:()=>U(!1),type:"Opportunities",handleDeleteData:async e=>{try{G(!0),200===(await(0,c.Vn)("api/opportunity/deleteMany",e)).status&&(b.oR.success("Opprtunities Delete successfully"),j([]),U(!1),a((e=>!e)))}catch(t){console.log(t),b.oR.error("server error")}finally{G(!1)}},ids:S}),(0,N.jsx)(k,{text:"Opprotunities file",isOpen:X,onClose:ee,customFields:[{name:"opportunityName",label:"Opportunity Name",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690be4a4e0f5916f4313f13"},{name:"",value:"",_id:"6690be4a4e0f5916f4313f14"}],validation:[{require:!0,message:"Opportunity Name is required ",_id:"6690be4a4e0f5916f4313f15"},{min:!1,value:"",message:"",_id:"6690be4a4e0f5916f4313f16"},{max:!1,value:"",message:"",_id:"6690be4a4e0f5916f4313f17"},{value:"",message:"",match:!1,_id:"6690be4a4e0f5916f4313f18"},{message:"",formikType:"",_id:"6690be4a4e0f5916f4313f19"}],_id:"6690be4a4e0f5916f4313f12"},{name:"accountName",label:"Account Name",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690be854e0f5916f4314260"},{name:"",value:"",_id:"6690be854e0f5916f4314261"}],validation:[{require:!0,message:"Account Name is required ",_id:"6690be854e0f5916f4314262"},{min:!1,value:"",message:"",_id:"6690be854e0f5916f4314263"},{max:!1,value:"",message:"",_id:"6690be854e0f5916f4314264"},{value:"",message:"",match:!1,_id:"6690be854e0f5916f4314265"},{message:"",formikType:"",_id:"6690be854e0f5916f4314266"}],_id:"6690be854e0f5916f431425f"},{name:"opportunityAmount",label:"Opportunity Amount",type:"number",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690bea44e0f5916f43145c5"},{name:"",value:"",_id:"6690bea44e0f5916f43145c6"}],validation:[{require:!0,message:"Opportunity Amount is required ",_id:"6690bea44e0f5916f43145c7"},{min:!1,value:"",message:"",_id:"6690bea44e0f5916f43145c8"},{max:!1,value:"",message:"",_id:"6690bea44e0f5916f43145c9"},{value:"",message:"",match:!1,_id:"6690bea44e0f5916f43145ca"},{message:"",formikType:"",_id:"6690bea44e0f5916f43145cb"}],_id:"6690bea44e0f5916f43145c4"},{name:"expectedCloseDate",label:"Expected Close Date",type:"date",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6690bec04e0f5916f4314942"},{name:"",value:"",_id:"6690bec04e0f5916f4314943"}],validation:[{require:!0,message:"Expected Close Date is required ",_id:"6690bec04e0f5916f4314944"},{min:!1,value:"",message:"",_id:"6690bec04e0f5916f4314945"},{max:!1,value:"",message:"",_id:"6690bec04e0f5916f4314946"},{value:"",message:"",match:!1,_id:"6690bec04e0f5916f4314947"},{message:"",formikType:"date",_id:"6690bec04e0f5916f4314948"}],_id:"6690bec04e0f5916f4314941"},{name:"salesStage",label:"Sales Stage",type:"select",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"Prospecting",value:"Prospecting",_id:"6690bf4a4e0f5916f4314cd7"},{name:"Qualification",value:"Qualification",_id:"6690bf4a4e0f5916f4314cd8"},{name:"Needs Analysis",value:"Needs Analysis",_id:"6690bf4a4e0f5916f4314cd9"},{name:"Value Propositon",value:"Value Propositon",_id:"6690bf4a4e0f5916f4314cda"},{name:"Identifying Decision Makers",value:"Identifying Decision Makers",_id:"6690bf4a4e0f5916f4314cdb"},{name:"Perception Analysis",value:"Perception Analysis",_id:"6690bf4a4e0f5916f4314cdc"},{name:"Proposal/Price Quote",value:"Proposal/Price Quote",_id:"6690bf4a4e0f5916f4314cdd"},{name:"Negotiation/Review",value:"Negotiation/Review",_id:"6690bf4a4e0f5916f4314cde"},{name:"Closed/Won",value:"Closed/Won",_id:"6690bf4a4e0f5916f4314cdf"},{name:"Closed/Lost",value:"Closed/Lost",_id:"6690bf4a4e0f5916f4314ce0"}],validation:[{require:!0,message:"Sales Stage is required",_id:"6690bf4a4e0f5916f4314ce1"},{min:!1,value:"",message:"",_id:"6690bf4a4e0f5916f4314ce2"},{max:!1,value:"",message:"",_id:"6690bf4a4e0f5916f4314ce3"},{value:"",message:"",match:!1,_id:"6690bf4a4e0f5916f4314ce4"},{message:"",formikType:"",_id:"6690bf4a4e0f5916f4314ce5"}],_id:"6690bf4a4e0f5916f4314cd6"}]})]})}},23848:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(31206),o=a(4450),l=a(3458),n=a(71997),s=a(27149),r=a(70579);function d(e){const{count:t,text:a,onFileSelect:d}=e,c=(0,i.dU)("secondaryGray.900","white"),u=(0,i.dU)("brand.500","white");return(0,r.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,r.jsx)(o.GridItem,{colSpan:{base:12},children:(0,r.jsx)(n.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===a?"img":"",csv:"csv",height:"100%",onFileSelect:d,isMultipleAllow:!1,content:(0,r.jsxs)(o.Box,{children:[(0,r.jsx)(l.In,{as:s.vpy,w:"80px",h:"80px",color:u}),(0,r.jsx)(o.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,r.jsx)(o.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),t>0&&(0,r.jsxs)(o.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",t]})]})})}),(0,r.jsx)(o.GridItem,{colSpan:{base:12},children:(0,r.jsxs)(o.Flex,{direction:"column",children:[(0,r.jsxs)(o.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",a]}),(0,r.jsx)(o.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}}}]);
//# sourceMappingURL=3999.324c671f.chunk.js.map